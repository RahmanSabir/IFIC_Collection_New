<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="card/layouts/main/main-layout">
<head>
    <meta charset="ISO-8859-1"></meta>
    <title>Password Change</title>
</head>
<body>
<div layout:fragment="content" th:remove="tag">

    <div class="content-wrapper">
        <section class="content">
            <div class="row">
                <div class="col-md-8 col-md-offset-2">
                    <div class="box box-primary">

                        <div class="box-header with-border" style="text-align: center;">
                            <h3 class="box-title">Change Password</h3>
                        </div>

                        <style>
                            .p_heading {
                                font-size: 13px;
                                margin: 0px;
                            }

                            #policy_message {
                                display: none;
                                background: #f1f1f1;
                                color: #000;
                                position: relative;
                                padding: 20px;
                                border: 1px solid gainsboro;
                            }

                            .valid {
                                color: green;
                            }

                            .valid:before {
                                position: relative;
                                left: -15px;
                                content: "*";
                            }

                            /* Add a red text color and an "x" when the requirements are wrong */
                            .invalid {
                                color: red;
                            }

                            .invalid:before {
                                position: relative;
                                left: -15px;
                                content: "*";
                            }
                        </style>

                        <form class="form-horizontal" method="post" th:action="@{/user/changePassword}"
                              th:object="${user}">
                            <input type="hidden" name="userId" th:value="${user.id}"></input>

                            <div class="box-body">
                                <div class="form-group">
                                    <label class="col-sm-2 custom-form-lebel-right required">Full Name</label>
                                    <div class="col-sm-6">
                                        <input name="firstName" class="form-control input-sm"
                                               th:value="${user.firstName}" disabled="disabled"></input>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="col-sm-2 custom-form-lebel-right required">Last Name</label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control input-sm" name="lastName"
                                               th:value="${user.lastName}" disabled="disabled"
                                               placeholder="Last Name"></input>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="col-sm-2 custom-form-lebel-right required">Old Password</label>
                                    <div class="col-sm-6">
                                        <input type="password" class="form-control input-sm" name="oldPassword"
                                               id="oldPassword"
                                               autocomplete="off" placeholder="Password"/>
                                    </div>
                                    <div class="col-md-4">
                                        <div id="policy_message" style="position: absolute">
                                            <p class="p_heading">Password must contain:</p>
                                            <p id="letter" class="invalid p_heading">A <b>lowercase</b> letter</p>
                                            <p id="capital" class="invalid p_heading">A <b>capital (uppercase)</b>
                                                letter</p>
                                            <p id="number" class="invalid p_heading">A <b>number</b></p>
                                            <p th:if="${loginPolicy != null && loginPolicy.specialCharacterRequired}"
                                               id="special" class="invalid p_heading">
                                                A
                                                <b>
                                                    special character
                                                </b>
                                            </p>
                                            <p id="repeatitiveCharacter" class="invalid p_heading">No <b>Repeatitive
                                                Characters</b></p>
                                            <p id="length" class="invalid p_heading">
                                                Minimum
                                                <b th:text="${loginPolicy.paswLength}">
                                                    0
                                                </b>
                                                <b>
                                                    characters
                                                </b>
                                            </p>
                                        </div>
                                    </div>

                                </div>

                                <div class="form-group">
                                    <label class="col-sm-2 custom-form-lebel-right required">New Password</label>
                                    <div class="col-sm-6">
                                        <input type="password" class="form-control input-sm" name="password"
                                               id="password"
                                               placeholder="Password" autocomplete="off"/>
                                    </div>
                                    <div id="check_box">
                                        <i style="font-size: 23px;cursor: pointer" class="fa fa-eye-slash"
                                           aria-hidden="true" onclick="myFunction()"></i>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="col-sm-2 custom-form-lebel-right required">Confirm Password</label>
                                    <div class="col-sm-6">
                                        <input disabled type="password" class="form-control input-sm"
                                               placeholder="Confirm password" id="pass2"
                                               name="pass2" onkeyup="checkpass();" autocomplete="off"/>
                                    </div>
                                    <span id='message'></span>
                                </div>
                            </div>
                            <!-- /.box-body -->
                            <div class="box-footer text-center" style="margin-top: 14px;">
                                <button disabled="disabled" id="userSave" type="submit" class="btn btn-info ">Submit
                                </button>
                                <!--<a type="submit" class="btn btn-danger" href="/user/list">Cancel</a>-->
                            </div>
                            <!-- /.box-footer -->
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script th:inline="javascript">
        /*<![CDATA[*/
        var loginPolicy = /*[[${loginPolicy}]]*/  {};
        /*]]>*/
        m
    </script>
    <script th:src="@{/dashboard/form/js/userPass.js}"></script>

</div>


</body>

</html>