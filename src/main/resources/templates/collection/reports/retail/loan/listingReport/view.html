<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="card/layouts/main/main-layout">
<head>
    <meta charset="UTF-8">
    <title th:text="${reportTitle}"></title>
</head>
<body>
<div layout:fragment="content">
    <div class="content-wrapper">
        <div class="content">
            <div class="row">
                <div class="col-xs-12">
                    <!--<div class="box box-info">
                        <div class="box">
                            &lt;!&ndash;<div class="box-body">&ndash;&gt;
                                &lt;!&ndash;<div class="form-group">&ndash;&gt;
                                    &lt;!&ndash;<label class="col-sm-2 control-label">Select Vip Status</label>&ndash;&gt;
                                    &lt;!&ndash;<div class="col-sm-3">&ndash;&gt;
                                        &lt;!&ndash;<select id="vipStatus" class="form-control" onchange="vipListSearch()">&ndash;&gt;
                                            &lt;!&ndash;<option value="">Select VIP Status</option>&ndash;&gt;
                                            &lt;!&ndash;<option th:each="vipStatus : ${vipStatusList}"&ndash;&gt;
                                                    &lt;!&ndash;th:value="${vipStatus}"&ndash;&gt;
                                                    &lt;!&ndash;th:text="${vipStatus}"></option>&ndash;&gt;
                                        &lt;!&ndash;</select>&ndash;&gt;
                                    &lt;!&ndash;</div>&ndash;&gt;
                                    &lt;!&ndash;<div id="isVipSearchLoading" class="col-xs-1" style="display: none">&ndash;&gt;
                                        &lt;!&ndash;<div class="circle-half-loader"></div>&ndash;&gt;
                                    &lt;!&ndash;</div>&ndash;&gt;
                                &lt;!&ndash;</div>&ndash;&gt;
                            &lt;!&ndash;</div>&ndash;&gt;
                            <button style="border-radius: 0; margin-bottom: 2px;float: right" id="exportVipListToExcelButton"
                                    class="btn btn-primary clearfix"><span class="glyphicon glyphicon-save"></span>
                                Export to Excel
                            </button>
                            <button style="border-radius: 0; margin-bottom: 2px;float: right" id="exportVipListToPdfButton"
                                    class="btn btn-primary clearfix"><span class="glyphicon glyphicon-save"></span>
                                Export to pdf
                            </button>

                        </div>
                    </div>-->
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12" id="listingReportId">
                    <div class="box box-info">
                        <div class="box-header with-border text-center">
                            <div class="box-title"></div>
                        </div>

                        <div class="box-body" id="grid">

                            <div class="table-responsive">
                                <table id="listing-report" class="table table-striped table-bordered table-condensed"
                                       cellspacing="0"
                                       >
                                    <thead>
                                    <tr>
                                        <th>Loan Account No</th>
                                        <th>Old Account No</th>
                                        <th>Customer ID</th>
                                        <th>Booking Channel</th>
                                        <th>Source ID</th>
                                        <th>Source Name</th>
                                        <th>Customer Name</th>
                                        <th>Company Name</th>
                                        <th>Customer Address</th>
                                        <th>Customer Phone</th>
                                        <th>Settlement AC</th>
                                        <th>Settlement AC Customer Name</th>
                                        <th>Balance of Settlement Amount</th>
                                        <th>Loan Limit</th>
                                        <th>Loan Outstanding</th>
                                        <th>Principal Outstanding</th>
                                        <th>Interest Outstanding</th>
                                        <th>Overdue Amount</th>
                                        <th>Interest Suspense</th>
                                        <th>EMI</th>
                                        <th>Total Recovary During the Month</th>
                                        <th>CL Status</th>
                                        <th>Main Interest Rate</th>
                                        <th>Disburse Date</th>
                                        <th>Download Date</th>
                                        <th>Next Sch. Date</th>
                                        <th>Expiry Date</th>
                                        <th>Loan Status</th>
                                        <th>Product Name</th>
                                        <th>Product Code</th>
                                        <th>Optima ID</th>
                                        <th>Branch Code</th>
                                        <th>Branch Name</th>
                                        <th>Region</th>
                                        <th>Penal Interest Rate</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr v-for="data in listingReportList">
                                        <td>{{data.loanAccountNo}}</td>
                                        <td>{{data.oldAccountNo}}</td>
                                        <td>{{data.customerID}}</td>
                                        <td>{{data.bookingChannel}}</td>
                                        <td>{{data.sourceID}}</td>
                                        <td>{{data.sourceName}}</td>
                                        <td>{{data.customerName}}</td>
                                        <td>{{data.companyName}}</td>
                                        <td>{{data.customerAddress}}</td>
                                        <td>{{data.customerPhone}}</td>
                                        <td>{{data.settlementAC}}</td>
                                        <td>{{data.settlementAcCustomerName}}</td>
                                        <td>{{data.balanceSettlementAmount}}</td>
                                        <td>{{data.loanlimit}}</td>
                                        <td>{{data.loanOutstanding}}</td>
                                        <td>{{data.principalOutstanding}}</td>
                                        <td>{{data.interestOutstanding}}</td>
                                        <td>{{data.overdueAmount}}</td>
                                        <td>{{data.interestSuspense}}</td>
                                        <td>{{data.emi}}</td>
                                        <td>{{data.totalRecovaryDuringMonth}}</td>
                                        <td>{{data.clStatus}}</td>
                                        <td>{{data.mainInterestRate}}</td>
                                        <td>{{data.disburseDate}}</td>
                                        <td>{{data.downloadDate}}</td>
                                        <td>{{data.nextSchDate}}</td>
                                        <td>{{data.expiryDate}}</td>
                                        <td>{{data.loanStatus}}</td>
                                        <td>{{data.productName}}</td>
                                        <td>{{data.productCode}}</td>
                                        <td>{{data.optimaID}}</td>
                                        <td>{{data.branchCode}}</td>
                                        <td>{{data.branchName}}</td>
                                        <td>{{data.region}}</td>
                                        <td>{{data.penalInterestRate}}</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <script th:inline="javascript">
                    /*<![CDATA[*/
                    var listingReportList = /*[[${listingReportList}]]*/ [];
                    var reportTitle = /*[[${reportTitle}]]*/ '';
                    /*]]>*/
                </script>

                <script>

                    listtingReportApp = new Vue({
                        el: '#listingReportId',
                        data: {
                            listingReportList: [],
                            reportName: reportTitle
                        },
                        created: function () {
                            this.listingReportList = Array.isArray(listingReportList) ? listingReportList : [];
                        },
                        methods:{
                        }
                    })

                    function getExportFileName(){
                        return listtingReportApp.reportName;
                    }


                    $(document).ready(function () {

                        $('#listing-report').DataTable({
                            ordering: false,
                            paging: true,
                            "info": false,
                            "processing": true,
                            "ajax": null,
                            "columns": [
                                {"data": "loanAccountNo"},
                                {"data": "oldAccountNo"},
                                {"data": "customerID"},
                                {"data": "bookingChannel"},
                                {"data": "sourceID"},
                                {"data": "sourceName"},
                                {"data": "customerName"},
                                {"data": "companyName"},
                                {"data": "customerAddress"},
                                {"data": "customerPhone"},
                                {"data": "settlementAC"},
                                {"data": "settlementAcCustomerName"},
                                {"data": "balanceSettlementAmount"},
                                {"data": "loanlimit"},
                                {"data": "loanOutstanding"},
                                {"data": "principalOutstanding"},
                                {"data": "interestOutstanding"},
                                {"data": "overdueAmount"},
                                {"data": "interestSuspense"},
                                {"data": "emi"},
                                {"data": "totalRecovaryDuringMonth"},
                                {"data": "clStatus"},
                                {"data": "mainInterestRate"},
                                {"data": "disburseDate"},
                                {"data": "downloadDate"},
                                {"data": "nextSchDate"},
                                {"data": "expiryDate"},
                                {"data": "loanStatus"},
                                {"data": "productName"},
                                {"data": "productCode"},
                                {"data": "optimaID"},
                                {"data": "branchCode"},
                                {"data": "branchName"},
                                {"data": "region"},
                                {"data": "penalInterestRate"}
                            ],
                            // columnDefs: [
                            //     {
                            //         render: function (data, type, row) {
                            //             return data ? data.toFixed(2) : 0;
                            //         },
                            //         targets: [14, 23, 24, 25, 26, 27]
                            //     },
                            //     {
                            //         render: function (data, type, row) {
                            //             return data ? formatDate_DD_MMM_YYYY(data) : 0;
                            //         },
                            //         targets: [12, 16, 17, 18, 19]
                            //     }
                            // ],
                            dom: 'Bfrtip',
                            buttons: [
                                {
                                    extend: 'csv',
                                    text: 'CSV',
                                    filename: function () {
                                        return getExportFileName();
                                    },
                                    title: function () {
                                        return getExportFileName();
                                    }
                                }, {
                                    extend: 'excel',
                                    text: 'Excel',
                                    filename: function () {
                                        return getExportFileName();
                                    },
                                    title: function () {
                                        return getExportFileName();
                                    }
                                }, {
                                    extend: 'print',
                                    text: 'Print',
                                    filename: function () {
                                        return getExportFileName();
                                    },
                                    title: function () {
                                        return getExportFileName();
                                    }
                                }

                            ]
                        })
                    })

                </script>
            </div>
        </div>
    </div>
</div>
</body>
</html>