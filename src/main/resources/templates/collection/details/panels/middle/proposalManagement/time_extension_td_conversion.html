<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="ISO-8859-1"/>
    <title>Time Extension/TD/Conversion</title>
</head>
<body>

<div id="layout-cibReport" th:fragment="time-extension-td-conversion">
    <div class="csi-view-form-full-area csi-view-indtable">
        <div class="box-header with-border csi-view-box-header">
            <h3 class="box-title">Time Extension/ TD/ Conversion</h3>
            <a class="btn btn-xs btn-primary pull-right" href="#add-update-time-extension-proposal-update" data-toggle="modal" >
                <i class="fa fa-plus-square"></i>
            </a>
        </div>
        <div id="time-extension-td-conversion-app" class="box-body">
            <div class="form-horizontal csi-view-form">
                <table class="table table-bordered">
                    <tbody>
                    <div id="layout-form-general" class="loancaseentry-sp general-div" style="margin-left: 0px">
                        <div class="loan-init-details-sp-inner">

                            <div class="form-group row csi-view-form-group">
                                <label class="col-sm-3 custom-details-lebel-left ">Proposal Type :</label>
                                <label class="col-sm-3 custom-form-lebel">{{timeExtensionTdConversionDto.proposalType}}</label>
                                <label class="col-sm-3 custom-details-lebel-left ">Expiry Date :</label>
                                <label class="col-sm-3 custom-form-lebel">{{formatDate(timeExtensionTdConversionDto.expiryDate)}}</label>
                            </div>

                            <div class="form-group row csi-view-form-group">
                                <label class="col-sm-3 custom-details-lebel-left ">Total No of TE/TD/C :</label>
                                <label class="col-sm-3 custom-form-lebel">{{timeExtensionTdConversionDto.totalNoOfTETDC}}</label>
                                <label class="col-sm-3 custom-details-lebel-left ">Branch Name :</label>
                                <label class="col-sm-3 custom-form-lebel">{{timeExtensionTdConversionDto.branchName}}</label>
                            </div>

                            <div class="form-group row csi-view-form-group">
                                <label class="col-sm-3 custom-details-lebel-left ">Proposal Send by (Name, EID) :</label>
                                <label class="col-sm-3 custom-form-lebel">{{timeExtensionTdConversionDto.proposalSendBy}}</label>
                                <label class="col-sm-3 custom-details-lebel-left ">Proposed Extended time/date :</label>
                                <label class="col-sm-3 custom-form-lebel">{{formatDate(timeExtensionTdConversionDto.proposedExtendedDate)}}</label>
                            </div>

                            <div class="form-group row csi-view-form-group">
                                <label class="col-sm-3 custom-details-lebel-left ">Loan Account No :</label>
                                <label class="col-sm-3 custom-form-lebel">{{timeExtensionTdConversionDto.loanAccountNo}}</label>
                                <label class="col-sm-3 custom-details-lebel-left ">Memo/Note Prepared by (Name, EID) :</label>
                                <label class="col-sm-3 custom-form-lebel">{{timeExtensionTdConversionDto.memoNotePreparedBy}}</label>
                            </div>

                            <div class="form-group row csi-view-form-group">
                                <label class="col-sm-3 custom-details-lebel-left ">Sanction Accepted by Borrower :</label>
                                <label class="col-sm-3 custom-form-lebel">{{timeExtensionTdConversionDto.sanctionAcceptedByBorrower}}</label>
                                <label class="col-sm-3 custom-details-lebel-left ">Loan Account Name :</label>
                                <label class="col-sm-3 custom-form-lebel">{{timeExtensionTdConversionDto.loanAccountName}}</label>
                            </div>

                            <div class="form-group row csi-view-form-group">
                                <label class="col-sm-3 custom-details-lebel-left ">Proposal Placed to :</label>
                                <label class="col-sm-3 custom-form-lebel">{{timeExtensionTdConversionDto.propPlaceName ? timeExtensionTdConversionDto.propPlaceName : ''}}</label>
                                <label class="col-sm-3 custom-details-lebel-left ">Sanction Accepted Date by Borrower :</label>
                                <label class="col-sm-3 custom-form-lebel">{{formatDate(timeExtensionTdConversionDto.sanctionAcceptedDateByBorrower)}}</label>
                            </div>

                            <div class="form-group row csi-view-form-group">
                                <label class="col-sm-3 custom-details-lebel-left ">Facility Nature :</label>
                                <label class="col-sm-3 custom-form-lebel">{{timeExtensionTdConversionDto.facilityNature}}</label>
                                <label class="col-sm-3 custom-details-lebel-left ">Approval Level :</label>
                                <label class="col-sm-3 custom-form-lebel">{{timeExtensionTdConversionDto.approvalLevelName ? timeExtensionTdConversionDto.approvalLevelName : ''}}</label>
                            </div>

                            <div class="form-group row csi-view-form-group">
                                <label class="col-sm-3 custom-details-lebel-left ">Capital Release :</label>
                                <label class="col-sm-3 custom-form-lebel">{{timeExtensionTdConversionDto.capitalRelease}}</label>
                                <label class="col-sm-3 custom-details-lebel-left ">CL Status :</label>
                                <label class="col-sm-3 custom-form-lebel">{{timeExtensionTdConversionDto.clstatus ? timeExtensionTdConversionDto.clstatus : ''}}</label>
                            </div>

                            <div class="form-group row csi-view-form-group">
                                <label class="col-sm-3 custom-details-lebel-left ">Proposal Prepared for :</label>
                                <label class="col-sm-3 custom-form-lebel">{{timeExtensionTdConversionDto.proposalPreparedFor ? timeExtensionTdConversionDto.proposalPreparedFor : ''}}</label>
                                <label class="col-sm-3 custom-details-lebel-left ">NPL Reduced :</label>
                                <label class="col-sm-3 custom-form-lebel">{{timeExtensionTdConversionDto.nplReduced}}</label>
                            </div>

                            <div class="form-group row csi-view-form-group">
                                <label class="col-sm-3 custom-details-lebel-left ">Disbursement Date :</label>
                                <label class="col-sm-3 custom-form-lebel">{{formatDate(timeExtensionTdConversionDto.disbursementDate)}}</label>
                                <label class="col-sm-3 custom-details-lebel-left ">Purpose of the Proposal :</label>
                                <label class="col-sm-3 custom-form-lebel">{{timeExtensionTdConversionDto.purposeOfTheProposalId ? timeExtensionTdConversionDto.purposeOfTheProposalId : ''}}</label>
                            </div>

                            <div class="form-group row csi-view-form-group">
                                <label class="col-sm-3 custom-details-lebel-left ">Remarks/ Comments :</label>
                                <label class="col-sm-3 custom-form-lebel">{{timeExtensionTdConversionDto.remarksOrComments}}</label>
                                <label class="col-sm-3 custom-details-lebel-left ">Legal detail status :</label>
                                <label class="col-sm-3 custom-form-lebel">{{timeExtensionTdConversionDto.legalDetailStatus}}</label>
                            </div>

                            <div class="form-group row csi-view-form-group">
                                <label class="col-sm-3 custom-details-lebel-left ">Attachment: (Relevant docs) :</label>
                                <label class="col-sm-3 custom-form-lebel">
                                    <a :href="'/collection/dms/document/preview?id='+timeExtensionTdConversionDto.dmsFileId+ '&type='+timeExtensionTdConversionDto.dmsFileType">{{timeExtensionTdConversionDto.fileName}}</a>
                                </label>
                                <label class="col-sm-3 custom-details-lebel-left ">Filling Amount :</label>
                                <label class="col-sm-3 custom-form-lebel">{{timeExtensionTdConversionDto.fillingAmount}}</label>
                            </div>

                            <div class="form-group row csi-view-form-group">
                                <label class="col-sm-3 custom-details-lebel-left ">Existing case status :</label>
                                <label class="col-sm-3 custom-form-lebel">{{timeExtensionTdConversionDto.existingCaseStatus}}</label>
                                <label class="col-sm-3 custom-details-lebel-left ">Total Legal & Other Expense :</label>
                                <label class="col-sm-3 custom-form-lebel">{{timeExtensionTdConversionDto.totalLegalAndOtherExpense}}</label>
                            </div>

                            <div class="form-group row csi-view-form-group">
                                <label class="col-sm-3 custom-details-lebel-left ">Type of case :</label>
                                <label class="col-sm-3 custom-form-lebel">{{timeExtensionTdConversionDto.typeOfCase}}</label>
                                <label class="col-sm-3 custom-details-lebel-left ">Dynamic Calculator for TE/ TD/ Conversion :</label>
                                <!--<label class="col-sm-3 custom-form-lebel">{{timeExtensionTdConversionDto.dynamicCalculatorForTETDConversion}}</label>-->
                                <button type="button" class="btn btn-info btn-lg" onclick="openCalculator()">Open Calculator</button>
                            </div>


                        </div>
                    </div>
                        <!--<tr>-->
                            <!--<td>Proposal Type</td>-->
                            <!--<td style="min-width: 100px">{{timeExtensionTdConversion.proposalType}}</td>-->
                            <!--<td>Expiry Date</td>-->
                            <!--<td style="min-width: 100px">{{formatDate(timeExtensionTdConversion.expiryDate)}}</td>-->
                            <!--<td>Total No of TE/TD/C</td>-->
                            <!--<td style="min-width: 100px">{{timeExtensionTdConversion.totalNoOfTETDC}}</td>-->
                        <!--</tr>-->

                        <!--<tr>-->
                            <!--<td>Branch Name</td>-->
                            <!--<td>{{timeExtensionTdConversion.branchName}}</td>-->
                            <!--<td>Proposal Send by (Name, EID)</td>-->
                            <!--<td>{{timeExtensionTdConversion.proposalSendBy}}</td>-->
                            <!--<td>Proposed Extended time/date</td>-->
                            <!--<td>{{formatDate(timeExtensionTdConversion.proposedExtendedDate)}}</td>-->
                        <!--</tr>-->

                        <!--<tr>-->
                            <!--<td>Loan Account No</td>-->
                            <!--<td>{{timeExtensionTdConversion.loanAccountNo}}</td>-->
                            <!--<td>Memo/Note Prepared by (Name, EID)</td>-->
                            <!--<td>{{timeExtensionTdConversion.memoNotePreparedBy}}</td>-->
                            <!--<td>Sanction Accepted by Borrower</td>-->
                            <!--<td>{{timeExtensionTdConversion.sanctionAcceptedByBorrower}}</td>-->
                        <!--</tr>-->

                        <!--<tr>-->
                            <!--<td>Loan Account Name</td>-->
                            <!--<td>{{timeExtensionTdConversion.loanAccountName}}</td>-->
                            <!--<td>Proposal Placed to</td>-->
                            <!--<td>{{timeExtensionTdConversion.hrPosition ? timeExtensionTdConversion.hrPosition.name : ''}}</td>-->
                            <!--<td>Sanction Accepted Date by Borrower</td>-->
                            <!--<td>{{formatDate(timeExtensionTdConversion.sanctionAcceptedDateByBorrower)}}</td>-->
                        <!--</tr>-->

                        <!--<tr>-->
                            <!--<td>Facility Nature</td>-->
                            <!--<td>{{timeExtensionTdConversion.facilityNature}}</td>-->
                            <!--<td>Approval Level</td>-->
                            <!--<td>{{timeExtensionTdConversion.approvalLevelEntity ? timeExtensionTdConversion.approvalLevelEntity.name : ''}}</td>-->
                            <!--<td>Capital Release</td>-->
                            <!--<td>{{timeExtensionTdConversion.capitalRelease}}</td>-->
                        <!--</tr>-->

                        <!--<tr>-->
                            <!--<td>CL Status</td>-->
                            <!--<td>{{timeExtensionTdConversion.assetClassificationLoanEntity ? timeExtensionTdConversion.assetClassificationLoanEntity.name : ''}}</td>-->
                            <!--<td>Proposal Prepared for</td>-->
                            <!--<td>{{timeExtensionTdConversion.proposalPreparedReason ? timeExtensionTdConversion.proposalPreparedReason.name : ''}}</td>-->
                            <!--<td>NPL Reduced</td>-->
                            <!--<td>{{timeExtensionTdConversion.nplReduced}}</td>-->
                        <!--</tr>-->

                        <!--<tr>-->
                            <!--<td>Disbursement Date</td>-->
                            <!--<td>{{formatDate(timeExtensionTdConversion.disbursementDate)}}</td>-->
                            <!--<td>Purpose of the Proposal</td>-->
                            <!--<td>{{timeExtensionTdConversion.proposalPurpose ? timeExtensionTdConversion.proposalPurpose.name : ''}}</td>-->
                            <!--<td>Remarks/ Comments</td>-->
                            <!--<td>{{timeExtensionTdConversion.remarksOrComments}}</td>-->
                        <!--</tr>-->

                        <!--<tr>-->
                            <!--<td>Legal detail status</td>-->
                            <!--<td>{{timeExtensionTdConversion.legalDetailStatus}}</td>-->
                            <!--<td></td>-->
                            <!--<td></td>-->
                            <!--<td>Attachment: (Relevant docs)</td>-->
                            <!--<td>{{timeExtensionTdConversion.fileName}}</td>-->
                        <!--</tr>-->

                        <!--<tr>-->
                            <!--<td>Filling Amount</td>-->
                            <!--<td>{{timeExtensionTdConversion.fillingAmount}}</td>-->
                            <!--<td>Existing case status</td>-->
                            <!--<td>{{timeExtensionTdConversion.existingCaseStatus}}</td>-->
                            <!--<td>Total Legal & Other Expense</td>-->
                            <!--<td>{{timeExtensionTdConversion.totalLegalAndOtherExpense}}</td>-->
                        <!--</tr>-->

                        <!--<tr>-->
                            <!--<td>Type of case</td>-->
                            <!--<td>{{timeExtensionTdConversion.typeOfCase}}</td>-->
                            <!--<td>Dynamic Calculator for TE/ TD/ Conversion</td>-->
                            <!--<td>{{timeExtensionTdConversion.dynamicCalculatorForTETDConversion}}</td>-->
                            <!--<td></td>-->
                            <!--<td></td>-->
                        <!--</tr>-->

                    </tbody>
                </table>
            </div>

            <div class="modal fade" id="add-update-time-extension-proposal-update" data-backdrop="static" data-keyboard="false">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 class="pull-left">Time Extension/ TD/ Conversion</h3>
                            <button class="pull-right close" data-dismiss="modal">&times;</button>
                        </div>

                        <form class="form-time-extension-td-conversion" th:enctype="${'multipart/form-data'}" th:action="@{/collection/samd/data-entry/time-extension-td-conversion/create}" method="post">
                            <input name="id" type="hidden" :value="timeExtensionTdConversionDto.id">
                            <input name="customerId" type="hidden" :value="customerId">

                            <div class="modal-body">
                                <div class="form-group col-sm-12">
                                    <label class="col-sm-2 custom-details-lebel-left">Proposal Type:</label>
                                    <div class="col-sm-4">
                                        <input type="text" name="proposalType" :value="timeExtensionTdConversionDto.proposalType" class="form-control" placeholder="Proposal Type" />
                                    </div>

                                    <label class="col-sm-2 custom-details-lebel-left">Branch Name:</label>
                                    <div class="col-sm-4">
                                        <input type="text" name="branchName" :value="timeExtensionTdConversionDto.branchName" class="form-control" placeholder="Branch Name">
                                    </div>
                                </div>

                                <div class="form-group col-sm-12">
                                    <label class="col-sm-2 custom-details-lebel-left">Loan Account No:</label>
                                    <div class="col-sm-4">
                                        <input type="text" name="loanAccountNo" :value="timeExtensionTdConversionDto.loanAccountNo" class="form-control" placeholder="Loan Account No" />
                                    </div>

                                    <label class="col-sm-2 custom-details-lebel-left">Loan Account Name:</label>
                                    <div class="col-sm-4">
                                        <input name="loanAccountName" :value="timeExtensionTdConversionDto.loanAccountName" class="form-control" placeholder="Loan Account Name">
                                    </div>
                                </div>

                                <div class="form-group col-sm-12">
                                    <label class="col-sm-2 custom-details-lebel-left">Facility Nature:</label>
                                    <div class="col-sm-4">
                                        <input type="text" name="facilityNature" :value="timeExtensionTdConversionDto.facilityNature" class="form-control" placeholder="Facility Nature" />
                                    </div>

                                    <label class="col-sm-2 custom-details-lebel-left">CL Status:</label>
                                    <div class="col-sm-4">
                                        <select name="clStatus" :value="timeExtensionTdConversionDto.clstatusId ? timeExtensionTdConversionDto.clstatusId: ''" class="form-control">
                                            <option value="">Select a status</option>
                                            <option v-for="(status, id) in clStatus" :value="id">{{status}}</option>
                                        </select>
                                    </div>

                                </div>

                                <div class="form-group col-sm-12">
                                    <label class="col-sm-2 custom-details-lebel-left">Disbursement Date:</label>
                                    <div class="col-sm-4">
                                        <input type="date" name="disbursementDate" :value="formatDateInput(timeExtensionTdConversionDto.disbursementDate)" class="form-control" placeholder="Disbursement Date" />
                                    </div>

                                    <label class="col-sm-2 custom-details-lebel-left">Legal detail status:</label>
                                    <div class="col-sm-4">
                                        <input type="text" name="legalDetailStatus" :value="timeExtensionTdConversionDto.legalDetailStatus" class="form-control" placeholder="Legal detail status" />
                                    </div>
                                </div>

                                <div class="form-group col-sm-12">
                                    <label class="col-sm-2 custom-details-lebel-left">Filling Amount:</label>
                                    <div class="col-sm-4">
                                        <input type="number" name="fillingAmount" :value="timeExtensionTdConversionDto.fillingAmount" class="form-control" placeholder="Filling Amount" />
                                    </div>

                                    <label class="col-sm-2 custom-details-lebel-left">Type of case:</label>
                                    <div class="col-sm-4">
                                        <input type="text" name="typeOfCase" :value="timeExtensionTdConversionDto.typeOfCase" class="form-control" placeholder="Type of case" />
                                    </div>
                                </div>

                                <div class="form-group col-sm-12">
                                    <label class="col-sm-2 custom-details-lebel-left">Expiry Date:</label>
                                    <div class="col-sm-4">
                                        <input type="date" name="expiryDate" :value="formatDateInput(timeExtensionTdConversionDto.expiryDate)" class="form-control" placeholder="Expiry Date">
                                    </div>

                                    <label class="col-sm-2 custom-details-lebel-left">Proposal Send by (Name, EID):</label>
                                    <div class="col-sm-4">
                                        <input type="text" name="proposalSendBy" :value="timeExtensionTdConversionDto.proposalSendBy" class="form-control" placeholder="Proposal Send by (Name, EID)" />
                                    </div>
                                </div>

                                <div class="form-group col-sm-12">
                                    <label class="col-sm-2 custom-details-lebel-left">Memo/Note Prepared by (Name, EID):</label>
                                    <div class="col-sm-4">
                                        <input name="memoNotePreparedBy" :value="timeExtensionTdConversionDto.memoNotePreparedBy" class="form-control" placeholder="Memo/Note Prepared by (Name, EID)">
                                    </div>

                                    <label class="col-sm-2 custom-details-lebel-left">Proposal Placed to:</label>
                                    <div class="col-sm-4">
                                        <select name="proposalPlacedTo" :value="timeExtensionTdConversionDto.proposalPlacedToId ? timeExtensionTdConversionDto.proposalPlacedToId: '' " class="form-control">
                                            <option value="" >Please select an option</option>
                                            <option v-for="(position, id) in proposalPlacedTo" :value="id">{{position}}</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group col-sm-12">
                                    <label class="col-sm-2 custom-details-lebel-left">Approval Level:</label>
                                    <div class="col-sm-4">
                                        <select name="approvalLevel" :value="timeExtensionTdConversionDto.approvalLevelId ? timeExtensionTdConversionDto.approvalLevelId:''" class="form-control">
                                            <option value="">Select an option</option>
                                            <option v-for="(level, id) in approvalLevel" :value="id">{{level}}</option>
                                        </select>
                                    </div>

                                    <label class="col-sm-2 custom-details-lebel-left">Proposal Prepared for:</label>
                                    <div class="col-sm-4">
                                        <select name="proposalPreparedFor" :value="timeExtensionTdConversionDto.proposalPreparedForId ? timeExtensionTdConversionDto.proposalPreparedForId:''" class="form-control">
                                            <option value="">Select an option</option>
                                            <option v-for="(reason, id) in proposalPreparedReason" :value="id">{{reason}}</option>
                                        </select>
                                    </div>

                                </div>

                                <div class="form-group col-sm-12">
                                    <label class="col-sm-2 custom-details-lebel-left">Purpose of the Proposal:</label>
                                    <div class="col-sm-4">
                                        <select name="purposeOfTheProposal" :value="timeExtensionTdConversionDto.purposeOfTheProposal ? timeExtensionTdConversionDto.purposeOfTheProposal:'' " class="form-control">
                                            <option value="">Select an option</option>
                                            <option v-for="(purpose, id) in proposalPurposes" :value="id">{{purpose}}</option>
                                        </select>
                                    </div>

                                    <label class="col-sm-2 custom-details-lebel-left">Existing case status:</label>
                                    <div class="col-sm-4">
                                        <input name="existingCaseStatus" :value="timeExtensionTdConversionDto.existingCaseStatus" class="form-control" placeholder="Existing case status" />
                                    </div>
                                </div>

                                <div class="form-group col-sm-12">
                                    <label class="col-sm-2 custom-details-lebel-left">Dynamic Calculator for TE/ TD/ Conversion:</label>
                                    <div class="col-sm-4">
                                        <input name="dynamicCalculatorForTETDConversion" :value="timeExtensionTdConversionDto.dynamicCalculatorForTETDConversion" class="form-control" />
                                    </div>
                                    <label class="col-sm-2 custom-details-lebel-left">Total No of TE/TD/C:</label>
                                    <div class="col-sm-4">
                                        <input type="number" name="totalNoOfTETDC" :value="timeExtensionTdConversionDto.totalNoOfTETDC" class="form-control" placeholder="Total No of TE/TD/C" />
                                    </div>
                                </div>

                                <div class="form-group col-sm-12">
                                    <label class="col-sm-2 custom-details-lebel-left">Proposed Extended time/date:</label>
                                    <div class="col-sm-4">
                                        <input type="date" name="proposedExtendedDate" :value="formatDateInput(timeExtensionTdConversionDto.proposedExtendedDate)" class="form-control" placeholder="Proposed Extended time/date">
                                    </div>
                                    <label class="col-sm-2 custom-details-lebel-left">Sanction Accepted by Borrower:</label>
                                    <div class="col-sm-4">
                                        <select name="sanctionAcceptedByBorrower" :value="timeExtensionTdConversionDto.sanctionAcceptedByBorrower" class="form-control">
                                            <option value="Yes">Yes</option>
                                            <option value="No">No</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group col-sm-12">
                                    <label class="col-sm-2 custom-details-lebel-left">Sanction Accepted Date by Borrower:</label>
                                    <div class="col-sm-4">
                                        <input type="date" name="sanctionAcceptedDateByBorrower" :value="formatDateInput(timeExtensionTdConversionDto.sanctionAcceptedDateByBorrower)" class="form-control" placeholder="Sanction Accepted Date by Borrower">
                                    </div>
                                    <label class="col-sm-2 custom-details-lebel-left">Capital Release:</label>
                                    <div class="col-sm-4">
                                        <input type="number" name="capitalRelease" :value="timeExtensionTdConversionDto.capitalRelease" class="form-control" placeholder="Capital Release" />
                                    </div>
                                </div>

                                <div class="form-group col-sm-12">
                                    <label class="col-sm-2 custom-details-lebel-left">NPL Reduced:</label>
                                    <div class="col-sm-4">
                                        <input type="text" name="nplReduced" :value="timeExtensionTdConversionDto.nplReduced" class="form-control" placeholder="NPL Reduced" />
                                    </div>
                                    <label class="col-sm-2 custom-details-lebel-left">Remarks/ Comments:</label>
                                    <div class="col-sm-4">
                                        <input type="text" name="remarksOrComments" :value="timeExtensionTdConversionDto.remarksOrComments" class="form-control" placeholder="Remarks/ Comments" />
                                    </div>
                                </div>

                                <div class="form-group col-sm-12">
                                    <label class="col-sm-2 custom-details-lebel-left">Attachment:</label>
                                    <div class="col-sm-4">
                                        <input type="file" class="form-control" placeholder="Attachment" name="attachment"/>
                                    </div>
                                    <label class="col-sm-2 custom-details-lebel-left">Total Legal & Other Expense:</label>
                                    <div class="col-sm-4">
                                        <input type="number" name="totalLegalAndOtherExpense" :value="timeExtensionTdConversionDto.totalLegalAndOtherExpense" class="form-control" placeholder="Total Legal & Other Expense" />
                                    </div>
                                </div>

                            </div>

                            <div class="modal-footer">
                                <button type="submit" class="btn btn-info">Save</button>
                                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <script>
            var timeExtensionTdConversionApp = new Vue({
                el: '#time-extension-td-conversion-app',
                data: {
                    customerId: '',
                    // timeExtensionTdConversion: {},
                    timeExtensionTdConversionDto:{},

                    clStatus: {},
                    proposalPlacedTo: {},
                    approvalLevel: {},
                    proposalPreparedReason: {},
                    proposalPurposes: {}
                },
                methods: {
                    formatDateInput: function (date) {
                        let date1 = date ? new Date(date) : new Date()

                        return date ? date1.getFullYear()
                            +'-'+((date1.getMonth()+1) < 10 ? '0'+(date1.getMonth()+1) : (date1.getMonth()+1))
                            +'-'+(date1.getDate() < 10 ? '0'+date1.getDate() : date1.getDate())
                            : '';
                    },
                    formatDate: function (date) {
                        return formatDate_DD_MMM_YYYY(date)
                    }
                },


            })

            function getTimeExtensionDtoDetails(){
                $.ajax({
                    url: '/collection/samd/data-entry/time-extension-td-conversion/get-by-customer-id?customerId='+customerId,
                    success: function (response) {
                        timeExtensionTdConversionApp.timeExtensionTdConversionDto = response;
                    },
                    error: function (response) {
                        alert("Unsuccessful")
                    }
                })
            }

            $(document).ready(function () {
                timeExtensionTdConversionApp.customerId = customerId;

                $('.form-time-extension-td-conversion').on('submit', function (e) {
                    e.preventDefault()
                    let formData = new FormData($(this)[0])
                    let url = $(this).prop('action')

                    $.ajax({
                        url: url,
                        type: "POST",
                        contentType: false,
                        processData: false,
                        enctype : 'multipart/form-data',
                        data: formData,
                        beforeSend: function (xhr) {
                            xhr.setRequestHeader(window.csrfHeader, window.csrfToken);
                        },
                        success: function (response) {
                            if (response.outcome == 'success'){
                                $('#add-update-time-extension-proposal-update').modal("toggle")
                                getData('time extension/ td/ conversion', "/collection/samd/data-entry/time-extension-td-conversion/get-by-customer-id?customerId="+customerId)
                                swal("Saved Successfully");
                                getTimeExtensionDtoDetails();


                            }
                        },
                        errors: function () {
                            console.log("something went wrong")
                        }
                    })
                })

                $('#tab-time-extension-td-conversion').on('click', function () {
                    getData('cl status', "/collection/samd/data-entry/time-extension-td-conversion/get-cl-status")
                    getData('proposal placed to', "/collection/samd/data-entry/time-extension-td-conversion/get-proposal-placed-to")
                    getData('approval level', "/collection/samd/data-entry/time-extension-td-conversion/get-approval-levels")
                    getData('proposal prepared reason', "/collection/samd/data-entry/time-extension-td-conversion/get-proposal-prepared-reasons")
                    getData('proposal purpose', "/collection/samd/data-entry/time-extension-td-conversion/get-proposal-purposes")
                    getData('time extension/ td/ conversion', "/collection/samd/data-entry/time-extension-td-conversion/get-by-customer-id?customerId="+customerId)

                    getTimeExtensionDtoDetails();
                })

                function getData(toVariable, url) {
                    $.ajax({
                        url: url,
                        success: function (response) {
                            if (toVariable == 'cl status')
                                timeExtensionTdConversionApp.clStatus = response
                            else if (toVariable == 'proposal placed to')
                                timeExtensionTdConversionApp.proposalPlacedTo = response
                            else if (toVariable == 'approval level')
                                timeExtensionTdConversionApp.approvalLevel = response
                            else if (toVariable == 'proposal prepared reason')
                                timeExtensionTdConversionApp.proposalPreparedReason = response
                            else if (toVariable == 'proposal purpose')
                                timeExtensionTdConversionApp.proposalPurposes = response
                            else if (toVariable == 'time extension/ td/ conversion')
                                timeExtensionTdConversionApp.timeExtensionTdConversion = response
                        },
                        error: function () {
                            console.log("Something went wrong.")
                        }
                    })
                }
            })
        </script>
    </div>
</div>
</body>


</html>
