<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="ISO-8859-1"></meta>
    <title>File Follow Up</title>
</head>
<body>
<div id="layout-cibReport" th:fragment="content">

    <form id="fileFollowUpApp" class="form-horizontal">
        <div class="box-body" style="padding-left: 20px">

            <div class="form-group">
               <label class="col-sm-4 ld required">LD No. </label>
                <div class="col-sm-8">
                    <input type="text" class="form-control input-sm" autocomplete="113"
                           :disabled="isViewPage || isEditPage" v-model="fileFollowUp.ldNo" required/>
                </div>
                <label class="col-sm-7 col-sm-offset-5 text-danger pull-right" v-if="errors.ldNo">
                    {{errors.ldNo}}
                </label>
            </div>
            <div class="form-group">
                <input type="hidden" class="hide" :disabled="isViewPage" v-model="fileFollowUp.branchCode"/>
            </div>

            <div class="form-group">
               <label class="col-sm-4 required">
                    File Transferred To SAMD (Legal Wing)
                </label>
                <div class="col-sm-4">
                    <div class="input-group date" data-provide="datepicker" data-date-format="dd-mm-yyyy">
                        <div class="input-group-addon">
                            <i class="fa fa-calendar"></i>
                        </div>
                        <input type="text"
                               :disabled="isViewPage" v-model="fileFollowUp.fileTransferToSAMD"
                               name="fileTransferToSAMD"
                               class="form-control pull-right ffu-date"
                               onchange="setPropertyValueFromInput(this)"
                               placeholder="dd-mm-yyyy" readonly required>
                    </div>
                </div>
                <label class="col-sm-7 col-sm-offset-5 text-danger pull-right" v-if="errors.fileTransferToSAMD">
                    {{errors.fileTransferToSAMD}}
                </label>
            </div>
            <div class="form-group">
               <label class="col-sm-4">Zone</label>
                <div class="col-sm-8">
                    <!-- <input type="text" class="form-control input-sm" autocomplete="80"
                            :disabled="isViewPage" v-model="fileFollowUp.zone" />-->
                    <multiselect v-model="zone"
                                 placeholder="Search Zone"
                                 label="name" track-by="id"
                                 :options="zones"
                                 :multiple="false" :taggable="true"
                                 :disabled="isViewPage">
                    </multiselect>
                </div>
            </div>
            <div class="form-group">
               <label class="col-sm-4">Branch Name </label>
                <div class="col-sm-8">
                    <!--<input type="text" class="form-control input-sm" autocomplete="80"
                           :disabled="isViewPage" v-model="fileFollowUp.branchName" placeholder="Enter branch name"/>-->
                    <multiselect v-model="branch"
                                 placeholder="Search Branch"
                                 @input="setBranchProperties"
                                 label="branchName" track-by="branchId"
                                 :options="getBranchesByZone"
                                 :multiple="false" :taggable="true"
                                 :disabled="isViewPage">
                    </multiselect>
                </div>
            </div>


            <div class="form-group" v-show="false">
                <label class="col-sm-4 required">Branch Code</label>
                <div class="col-sm-8">
                    <input class="form-control" :readonly="isViewPage"
                           placeholder="Branch Code"
                           v-model="fileFollowUp.branchCode">
                </div>
            </div>

            <div class="form-group">
               <label class="col-sm-4">Division </label>
                <div class="col-sm-8">
                    <!--<input type="text" class="form-control input-sm" autocomplete="80"
                           :disabled="isViewPage" v-model="fileFollowUp.division" placeholder=""/>-->
                    <multiselect v-model="fileFollowUp.division"
                                 placeholder="Select Division"
                                 :options="divisions" :show-labels="false"
                                 :searchable="true" :taggable="true" :disabled="isViewPage">
                    </multiselect>
                </div>
            </div>

            <div class="form-group">
               <label class="col-sm-4">District </label>
                <div class="col-sm-8">
                    <!-- <input type="text" class="form-control input-sm" autocomplete="80"
                            :disabled="isViewPage" v-model="fileFollowUp.district"/>-->
                    <multiselect v-model="fileFollowUp.district"
                                 placeholder="Select District"
                                 :options="getDistrictsByDivision" :show-labels="false"
                                 :searchable="true" :taggable="true" :disabled="isViewPage">
                    </multiselect>
                </div>
            </div>



            <div class="form-group">
               <label class="col-sm-4">Account's Name </label>
                <div class="col-sm-8">
                    <input type="text" class="form-control input-sm" autocomplete="81"
                           :disabled="isViewPage" v-model="fileFollowUp.accountName" placeholder="Enter account name"/>
                </div>
            </div>

            <div class="form-group">
               <label class="col-sm-4">Borrower's Name </label>
                <div class="col-sm-8">
                    <input type="text" class="form-control input-sm" autocomplete="82"
                           :disabled="isViewPage" v-model="fileFollowUp.borrowerName"
                           placeholder="Enter borrower name"/>
                </div>
            </div>

            <div class="form-group">
               <label class="col-sm-4">Customer's CIF Number </label>
                <div class="col-sm-8">
                    <input type="text" class="form-control input-sm" autocomplete="83"
                           :disabled="isViewPage" v-model="fileFollowUp.customerCifNumber"
                           placeholder="Enter Customer CIF Number"/>
                </div>
            </div>

            <div class="form-group">
               <label class="col-sm-4">Loan A/C Number </label>
                <div class="col-sm-8">
                    <input type="text" class="form-control input-sm" autocomplete="84"
                           :disabled="isViewPage" v-model="fileFollowUp.loanAccountNumber"
                           @change="getAccountInfoFromApi"
                           placeholder="Enter Loan Account Number"/>
                </div>
            </div>

            <div class="form-group">
               <label class="col-sm-4">Business Segment </label>
                <div class="col-sm-8">
                    <multiselect v-model="fileFollowUp.businessSegment"
                                 placeholder="Enter Business Segment"
                                 :options="['CBD', 'SME', 'RMG', 'Retail']" :show-labels="false"
                                 :searchable="false" :taggable="true" :disabled="isViewPage">
                    </multiselect>
                </div>
            </div>

            <div class="form-group">
               <label class="col-sm-4">
                    Call Back Notice Served
                </label>
                <div class="col-sm-2">
                    <select id="callBackNoticeServed"
                            :disabled="isViewPage" v-model="fileFollowUp.callBackNoticeServed"
                            class="form-control">
                        <option :value="false">No</option>
                        <option :value="true">Yes</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
               <label class="col-sm-4">
                    Demand Notice Served
                </label>
                <div class="col-sm-2">
                    <select id="demandNoticeServed"
                            :disabled="isViewPage" v-model="fileFollowUp.demandNoticeServed"
                            @change="clearFieldsWithFlag(
                                                fileFollowUp.demandNoticeServed,
                                                'demandNoticeServedDate'
                                            )"
                            class="form-control">
                        <option :value="false">No</option>
                        <option :value="true">Yes</option>
                    </select>
                </div>

                <div class="col-sm-5" v-show="fileFollowUp.demandNoticeServed">
                    <div class="form-group" >
                       <label class="col-sm-4">Claim Amount</label>
                        <div class="col-sm-8">
                            <input type="number" class="form-control input-sm" autocomplete="85"
                                   :disabled="isViewPage" v-model="fileFollowUp.claimAmount"
                                   placeholder="Enter Claim Amount"/>
                        </div>
                    </div>

                    <div class="form-group">
                       <label class="col-sm-4">Date</label>
                        <div class="col-sm-8 date">
                            <div class="input-group date" data-provide="datepicker" data-date-format="dd-mm-yyyy">
                                <div class="input-group-addon">
                                    <i class="fa fa-calendar"></i>
                                </div>
                                <input type="text"
                                       :disabled="isViewPage" v-model="fileFollowUp.demandNoticeServedDate"
                                       name="demandNoticeServedDate"
                                       class="form-control pull-right ffu-date" onchange="setPropertyValueFromInput(this)"
                                       placeholder="dd-mm-yyyy" readonly>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div v-for="(artharin,index) in fileFollowUp.fileFollowUpLegalNoticeServedForArtharinSuits">
                <div class="form-group">
                   <label class="col-sm-4">
                        Legal Notice Served For Artharin Suit
                    </label>
                    <div class="col-sm-2">
                        <select id="lnsfas"
                                :disabled="isViewPage" v-model="artharin.legalNoticeServedForArtharinSuit"
                                @change="clearFieldsWithFlag(
                                                artharin.legalNoticeServedForArtharinSuit,
                                                'dateOfLegalNoticeServedForArtharinSuit'
                                            )"
                                class="form-control">
                            <option :value="false">No</option>
                            <option :value="true">Yes</option>
                        </select>
                    </div>
                    <div class="col-sm-4" v-show="artharin.legalNoticeServedForArtharinSuit">
                        <div class="form-group" >
                            <label class="col-sm-5">Claim Amount</label>
                            <div class="col-sm-7">
                                <input type="number" class="form-control input-sm" autocomplete="85"
                                       :disabled="isViewPage" v-model="artharin.legalNoticeServedForArtharinSuitClaimAmount"
                                       placeholder="Enter Claim Amount"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-5">Date</label>
                            <div class="col-sm-7 date">
                                <div class="input-group date" >
                                    <div class="input-group-addon">
                                        <i class="fa fa-calendar"></i>
                                    </div>
                                    <vuejs-datepicker format="dd/MMM/yyyy" id="dateOfLegalNoticeServedForArtharinSuit"
                                                     placeholder="dd/MMM/yyyy" name="dateOfLegalNoticeServedForArtharinSuit" v-model="artharin.dateOfLegalNoticeServedForArtharinSuit" ></vuejs-datepicker>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-2 pull-right">
                        <button type="button" @click="addLegalNoticeServedForArtharin" v-if="!isViewPage && fileFollowUp.fileFollowUpLegalNoticeServedForArtharinSuits.length - 1 == index"
                                class="pull-right btn btn-success btn-sm center-block" >
                            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                        </button>
                        <button @click="removeLegalNoticeServedForArtharin(index),disbaleLegalNoticeServedForArtharin(artharin)" v-if="!isViewPage && fileFollowUp.fileFollowUpLegalNoticeServedForArtharinSuits.length > 1" type="button" class="pull-right btn btn-danger btn-sm center-block">
                            <span class="glyphicon glyphicon-minus" aria-hidden="true"></span>
                        </button>
                    </div>
                </div>
            </div>

            <div v-for="(niAct,index) in fileFollowUp.fileFollowUpLegalNoticeServedNIActs">
                <div class="form-group">
                   <label class="col-sm-4">
                        Legal Notice Served For U/S 138 Of N.I Act
                    </label>
                    <div class="col-sm-2">
                        <select id="lnsfnia"
                                :disabled="isViewPage" v-model="niAct.legalNoticeServedForUS138OfNIAct"
                                @change="clearFieldsWithFlag(
                                                niAct.legalNoticeServedForUS138OfNIAct,
                                                'dateOfLegalNoticeServedForUS138OfNIAct'
                                            )"
                                class="form-control">
                            <option :value="false">No</option>
                            <option :value="true">Yes</option>
                        </select>
                    </div>

                    <div class="col-sm-4" v-show="niAct.legalNoticeServedForUS138OfNIAct">
                        <div class="form-group" >
                            <label class="col-sm-5">Claim Amount</label>
                            <div class="col-sm-7">
                                <input type="number" class="form-control input-sm" autocomplete="85"
                                       :disabled="isViewPage" v-model="niAct.legalNoticeServedForUS138ClaimedAmount"
                                       placeholder="Enter Claim Amount"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-5">Date</label>
                            <div class="col-sm-7 date">
                                <div class="input-group date" >
                                    <div class="input-group-addon">
                                        <i class="fa fa-calendar"></i>
                                    </div>
                                    <vuejs-datepicker format="dd/MMM/yyyy" id="dateOfLegalNoticeServedForUS138OfNIAct"
                                                      placeholder="dd/MMM/yyyy" name="dateOfLegalNoticeServedForUS138OfNIAct" v-model="niAct.dateOfLegalNoticeServedForUS138OfNIAct" ></vuejs-datepicker>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-2 pull-right">
                        <button type="button" @click="addLegalNoticeServedForNiAct" v-if="!isViewPage && fileFollowUp.fileFollowUpLegalNoticeServedNIActs.length - 1 == index"
                                class="pull-right btn btn-success btn-sm center-block" >
                            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                        </button>
                        <button @click="removeLegalNoticeServedForNiAct(index),disbaleLegalNoticeServedForNiAct(niAct)" v-if="!isViewPage && fileFollowUp.fileFollowUpLegalNoticeServedNIActs.length > 1" type="button" class="pull-right btn btn-danger btn-sm center-block">
                            <span class="glyphicon glyphicon-minus" aria-hidden="true"></span>
                        </button>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-5"></div>

                </div>
            </div>

            <div class="form-group">
               <label class="col-sm-4">Outstanding </label>
                <div class="col-sm-2">
                    <input type="number" class="form-control input-sm" autocomplete="85"
                           :disabled="isViewPage" v-model="fileFollowUp.outStanding"
                    />
                </div>
                <div class="col-sm-5">
                    <div class="form-group">
                       <label class="col-sm-4">Date</label>
                        <div class="col-sm-7 date">
                            <div class="input-group date" data-provide="datepicker" data-date-format="dd-mm-yyyy">
                                <div class="input-group-addon">
                                    <i class="fa fa-calendar"></i>
                                </div>
                                <input type="text"
                                       :disabled="isViewPage" v-model="fileFollowUp.outstandingDate"
                                       name="outstandingDate"
                                       class="form-control pull-right ffu-date" onchange="setPropertyValueFromInput(this)"
                                       placeholder="dd-mm-yyyy" readonly>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
               <label class="col-sm-4">
                    Written Off
                </label>
                <div class="col-sm-2">
                    <select id="writtenOf"
                            :disabled="isViewPage" v-model="fileFollowUp.writtenOff"
                            @change="clearFieldsWithFlag(
                                                fileFollowUp.writtenOff,
                                                'writtenOfDate',
                                            )"
                            class="form-control">
                        <option :value="false">No</option>
                        <option :value="true">Yes</option>
                    </select>
                </div>

                <div class="col-sm-5"  v-show="fileFollowUp.writtenOff" >
                    <div class="form-group">
                       <label class="col-sm-4">Written Off Amount</label>
                        <div class="col-sm-8">
                            <input type="number" class="form-control input-sm" autocomplete="85"
                                   :disabled="isViewPage" v-model="fileFollowUp.writtenOffAmount"
                                   placeholder="Enter Written off Amount"/>
                        </div>
                    </div>

                    <div class="form-group">
                       <label class="col-sm-4">Date</label>
                        <div class="col-sm-7 date">
                            <div class="input-group date" data-provide="datepicker" data-date-format="dd-mm-yyyy">
                                <div class="input-group-addon">
                                    <i class="fa fa-calendar"></i>
                                </div>
                                <input type="text"
                                       :disabled="isViewPage" v-model="fileFollowUp.writtenOfDate"
                                       name="writtenOfDate"
                                       class="form-control pull-right ffu-date" onchange="setPropertyValueFromInput(this)"
                                       placeholder="dd-mm-yyyy" readonly>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div v-for="(security, index) in fileFollowUp.fileFollowUpCollateralSecurityDetailsList">
                <div class="form-group">
                    <label class="col-sm-5">Collateral Security</label>
                    <div class="col-sm-5">
                        <multiselect v-model="security.fileFollowUpCollateralSecurityDetailsList"
                                     placeholder="Select Collaterals Security"
                                     label="name" track-by="id"
                                     :options="collateralSecurities" @input="getSelectedCollateralSecurityId(security,index)"
                                     :multiple="false" :taggable="true" :disabled="isViewPage">
                        </multiselect>
                    </div>
                    <div class="col-sm-2">
                        <button type="button" @click="addNewCollateralSecurity"
                                class="pull-right btn btn-success btn-sm center-block" v-if="!isViewPage && fileFollowUp.fileFollowUpCollateralSecurityDetailsList.length - 1 == index">
                            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                        </button>
                        <button @click="disbaleCollSec(security),removeExistingCollateralSecurity(index)" v-if="!isViewPage && fileFollowUp.fileFollowUpCollateralSecurityDetailsList.length > 1" type="button" class="pull-right btn btn-danger btn-sm center-block">
                            <span class="glyphicon glyphicon-minus" aria-hidden="true"></span>
                        </button>
                    </div>
                </div>
                <div class="form-group" v-show="isFixedAssetCollateralSecurity(index)">
                    <label class="col-sm-5 text-right">Fixed Asset Details : </label>
                    <div class="col-sm-7">
                    <textarea maxlength="250" v-model="security.collateralSecurityFixedAssetDetails"
                              placeholder="Fixed Asset Details"
                              class="form-control" :readonly="isViewPage"></textarea>
                    </div>
                </div>

                <div class="form-group" v-show="isLand(index)" style="margin-top: 40px">
                    <label class="col-sm-6 text-right">Number Of Schedule </label>
                    <div class="col-sm-5">
                        <input type="number" class="form-control input-sm" autocomplete="85"
                               :disabled="isViewPage" v-model="security.numberOfSchedule"
                        />
                    </div>
                </div>

                <div class="form-group" v-show="isLand(index)">
                    <label class="col-sm-6 text-right">Total Land Area </label>
                    <div class="col-sm-5">
                        <input type="number" class="form-control input-sm" autocomplete="85"
                               :disabled="isViewPage" v-model="security.collateralTotalLandArea"
                        />
                    </div>
                </div>

                <div class="form-group" v-show="isFlatHouseBuilding(index) || isLand(index)">
                    <div class="col-sm-1"></div>
                    <div class="col-sm-10">
                        <table class="table">
                            <thead>
                            <tr>
                                <th colspan="4">
                                    <label class="required"><u>Land:</u></label>
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td rowspan="3">1</td>
                                <td rowspan="3">
                                    <b>Within:</b>
                                </td>
                                <td>
                                    a) City Corporation
                                </td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="54" :readonly="isViewPage"
                                           v-model="security.collSecurityCityCorporation">
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    b) Pourasava Text
                                </td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="55" :readonly="isViewPage"
                                           v-model="security.collSecurityPourasava">
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    c) Out of City Corporation & Pourasava
                                </td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="56" :readonly="isViewPage"
                                           v-model="security.outOfCityCorporationPourasava">
                                </td>
                            </tr>

                            <tr>
                                <td>2</td>
                                <td>
                                    <b>District:</b>
                                </td>
                                <td></td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="57" :readonly="isViewPage"
                                           v-model="security.collSecurityDistrict">
                                </td>
                            </tr>

                            <tr>
                                <td>3</td>
                                <td>
                                    <b>Mouza:</b>
                                </td>
                                <td></td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="58" :readonly="isViewPage"
                                           v-model="security.collSecurityMouza">
                                </td>
                            </tr>

                            <tr>
                                <td>4</td>
                                <td>
                                    <b>SRO:</b>
                                </td>
                                <td></td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="59" :readonly="isViewPage"
                                           v-model="security.collSecuritySro">
                                </td>
                            </tr>

                            <tr>
                                <td>5</td>
                                <td>
                                    <b>P.S:</b>
                                </td>
                                <td></td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="60" :readonly="isViewPage"
                                           v-model="security.collSecurityPs">
                                </td>
                            </tr>

                            <tr>
                                <td rowspan="5">6</td>
                                <td rowspan="5">
                                    <b>Khatian No.</b>
                                </td>
                                <td>
                                    CS
                                </td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="61" :readonly="isViewPage"
                                           v-model="security.khatianCs">
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    SA
                                </td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="62" :readonly="isViewPage"
                                           v-model="security.khatianSa">
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    RS
                                </td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="63" :readonly="isViewPage"
                                           v-model="security.khatianRs">
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    BS
                                </td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="64" :readonly="isViewPage"
                                           v-model="security.khatianBs">
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    City
                                </td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="65" :readonly="isViewPage"
                                           v-model="security.khatianCity">
                                </td>
                            </tr>


                            <tr>
                                <td rowspan="5">7</td>
                                <td rowspan="5">
                                    <b>JL No.</b>
                                </td>
                                <td>
                                    CS
                                </td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="66" :readonly="isViewPage"
                                           v-model="security.jlCs">
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    SA
                                </td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="67" :readonly="isViewPage"
                                           v-model="security.jlSa">
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    RS
                                </td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="68" :readonly="isViewPage"
                                           v-model="security.jlRs">
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    BS
                                </td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="69" :readonly="isViewPage"
                                           v-model="security.jlBs">
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    City
                                </td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="70" :readonly="isViewPage"
                                           v-model="security.jlCity">
                                </td>
                            </tr>

                            <tr>
                                <td rowspan="5">8</td>
                                <td rowspan="5">
                                    <b>Plot No.</b>
                                </td>
                                <td>
                                    CS
                                </td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="71" :readonly="isViewPage"
                                           v-model="security.plotCs">
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    SA
                                </td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="72" :readonly="isViewPage"
                                           v-model="security.plotSa">
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    RS
                                </td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="73" :readonly="isViewPage"
                                           v-model="security.plotRs">
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    BS
                                </td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="74" :readonly="isViewPage"
                                           v-model="security.plotBs">
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    City
                                </td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="75" :readonly="isViewPage"
                                           v-model="security.plotCity">
                                </td>
                            </tr>

                            <tr>
                                <td rowspan="4">9</td>
                                <td rowspan="4">
                                    <b>Bounded By:</b>
                                </td>
                                <td>
                                    North
                                </td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="76" :readonly="isViewPage"
                                           v-model="security.boundedByNorth">
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    South
                                </td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="77" :readonly="isViewPage"
                                           v-model="security.boundedBySouth">
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    East
                                </td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="78" :readonly="isViewPage"
                                           v-model="security.boundedByEast">
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    West
                                </td>
                                <td>
                                    <input type="text" class="form-control" autocomplete="79" :readonly="isViewPage"
                                           v-model="security.boundedByWest">
                                </td>
                            </tr>


                            </tbody>
                        </table>
                    </div>
                    <div class="col-sm-1"></div>

                </div>

                <div class="form-group" v-show="isOtherCollateralSecurity(index) || isNoSecurity(index) || isPledge(index) || isLien(index)">
                    <label class="col-sm-5 text-right">Collateral Security Description</label>
                    <div class="col-sm-7">
                    <textarea maxlength="250" class="form-control" :readonly="isViewPage"
                              placeholder="Description"
                              v-model="security.otherCollateralSecurity"></textarea>
                    </div>
                </div>

            </div>

           <!-- <div class="form-group">
               <label class="col-sm-4">Collateral Security: </label>
                <div class="col-sm-8">

                    <div class="form-group">
                       <label class="col-sm-4">Total Market Value </label>
                        <div class="col-sm-8">
                            <input type="number" class="form-control input-sm" autocomplete="85"
                                   :disabled="isViewPage" v-model="fileFollowUp.totalMarketValue"
                            />
                        </div>
                    </div>

                    <div class="form-group">
                       <label class="col-sm-4">Total Forced Sale Value</label>
                        <div class="col-sm-8">
                            <input type="number" class="form-control input-sm" autocomplete="85"
                                   :disabled="isViewPage" v-model="fileFollowUp.totalForcedSaleValue"
                            />
                        </div>
                    </div>
                </div>
            </div>
-->



            <div v-for="(auctionNotice, index) in fileFollowUp.auctionNoticePublishedEntityList">
                <div class="form-group">
                   <label class="col-sm-4">
                        Auction Notice Published
                    </label>
                    <div class="col-sm-2">
                        <select
                                :disabled="isViewPage" v-model="auctionNotice.auctionNoticePublished"
                                @change="clearFieldsWithFlag(auctionNotice.auctionNoticePublished,'auctionNoticePublishedDate')"
                                class="form-control">
                            <option :value="false">No</option>
                            <option :value="true">Yes</option>
                        </select>
                    </div>

                    <div class="col-sm-4"
                         v-show="auctionNotice.auctionNoticePublished">
                        <label class="col-sm-4">Date</label>
                        <div class="col-sm-7 date">
                            <div class="input-group date" >
                                <div class="input-group-addon">
                                    <i class="fa fa-calendar"></i>
                                </div>
                                <vuejs-datepicker format="dd/MMM/yyyy" id="auctionNamePublishDate" placeholder="dd/MMM/yyyy"  name="auctionNoticePublishedDate" v-model="auctionNotice.auctionNoticePublishedDate" ></vuejs-datepicker>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-2 pull-right">
                        <button type="button" @click="addAuctionNoticePublished" v-if="!isViewPage && fileFollowUp.auctionNoticePublishedEntityList.length - 1 == index"
                                class="pull-right btn btn-success btn-sm center-block" >
                            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                        </button>
                        <button @click="removeAuctionNoticePublish(index),disbaleAuctionNoticePublish(auctionNotice)" v-if="fileFollowUp.auctionNoticePublishedEntityList.length > 1" type="button" class="pull-right btn btn-danger btn-sm center-block">
                            <span class="glyphicon glyphicon-minus" aria-hidden="true"></span>
                        </button>
                    </div>
                </div>
            </div>

            <div class="form-group">
               <label class="col-sm-4">
                    Auction Held On
                </label>
                <div class="col-sm-8">
                    <div class="row">
                        <label class="col-sm-4">
                            Date
                        </label>
                        <div class="col-sm-8 date margin-bottom">
                            <div class="input-group date" data-provide="datepicker" data-date-format="dd-mm-yyyy">
                                <div class="input-group-addon">
                                    <i class="fa fa-calendar"></i>
                                </div>
                                <input type="text"
                                       :disabled="isViewPage" v-model="fileFollowUp.dateOfAuctionHeldOn"
                                       name="dateOfAuctionHeldOn"
                                       class="form-control pull-right ffu-date"
                                       onchange="setPropertyValueFromInput(this)" placeholder="dd-mm-yyyy" readonly>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <label class="col-sm-4">
                            Newspaper:
                        </label>
                        <div class="col-sm-8">
                            <textarea type="text"
                                      :disabled="isViewPage" v-model="fileFollowUp.newspaperNameForActionHeldOn"
                                      class="form-control"></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
               <label class="col-sm-4">
                    Bidders Participated
                </label>
                <div class="col-sm-8">
                    <select id="bpi"
                            :disabled="isViewPage" v-model="fileFollowUp.biddersParticipated"
                            @change="clearFieldsWithFlag(
                                                fileFollowUp.biddersParticipated,
                                                'numberOfParticipants', 'highestBidAmount', 'loanOutstanding',
                                                'forceSaleValue', 'marketValue', 'numberOfScheduledLand', 'totalLandArea',
                                                'biddersParticipation'
                                            )"
                            class="form-control margin-bottom">
                        <option :value="false">No</option>
                        <option :value="true">Yes</option>
                    </select>

                    <fieldset id="biddersParticipatedInfo"
                              v-show="fileFollowUp.biddersParticipated">
                        <div class="row">
                            <label class="col-sm-6">
                                How Many Participants (Number)
                            </label>
                            <div class="col-sm-6">
                                <input type="number" autocomplete="86" :disabled="isViewPage"
                                       v-model="fileFollowUp.numberOfParticipants"
                                       class="form-control"
                                       placeholder="Number of participant"/>
                            </div>
                        </div>
                        <div class="row">
                            <label class="col-sm-6">
                                Highest Bid Amount
                            </label>
                            <div class="col-sm-6">
                                <input type="number" autocomplete="87" :disabled="isViewPage"
                                       v-model="fileFollowUp.highestBidAmount"
                                       class="form-control"
                                       placeholder="Highest bid amount"/>
                            </div>
                        </div>
                        <div class="row">
                            <label class="col-sm-6">
                                Loan Outstanding
                            </label>
                            <div class="col-sm-6">
                                <input type="number" autocomplete="88" :disabled="isViewPage"
                                       v-model="fileFollowUp.loanOutstanding"
                                       class="form-control"
                                       placeholder="Loan outstanding amount"/>
                            </div>
                        </div>
                        <div class="row">
                            <label class="col-sm-6">
                                Force Sale Value
                            </label>
                            <div class="col-sm-6">
                                <input type="number" autocomplete="89" :disabled="isViewPage"
                                       v-model="fileFollowUp.forceSaleValue"
                                       class="form-control"
                                       placeholder="Force Sale Value"/>
                            </div>
                        </div>
                        <div class="row">
                            <label class="col-sm-6">
                                Market Value
                            </label>
                            <div class="col-sm-6">
                                <input type="number" autocomplete="90" :disabled="isViewPage"
                                       v-model="fileFollowUp.marketValue"
                                       class="form-control"
                                       placeholder="Market Value"/>
                            </div>
                        </div>
                        <div class="row">
                            <label class="col-sm-6">
                                Total Number Scheduled Land & Total Land Area
                            </label>
                            <div class="col-sm-6">
                                                    <textarea :disabled="isViewPage"
                                                              v-model="fileFollowUp.totalLandArea"
                                                              class="form-control"></textarea>
                            </div>
                        </div>
                        <div class="row">
                            <label class="col-sm-6">
                                Bidder's Participation (For The Scheduled)
                            </label>
                            <div class="col-sm-6">
                                <input type="text" :disabled="isViewPage"
                                       v-model="fileFollowUp.biddersParticipation"
                                       class="form-control"
                                       placeholder="Bidder's participation"/>
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>

            <div class="form-group">
               <label class="col-sm-4">
                    Auction Accepted By The Management
                </label>
                <div class="col-sm-2">
                    <select id="aabtm"
                            :disabled="isViewPage" v-model="fileFollowUp.auctionAcceptedByManagement"
                            @change="clearFieldsWithFlag(
                                                fileFollowUp.auctionAcceptedByManagement,
                                                'dateOfAuctionAcceptedByManagement'
                                            )"
                            class="form-control">
                        <option :value="false">No</option>
                        <option :value="true">Yes</option>
                    </select>
                </div>
                <div class="col-sm-5" id="dateOfAuctionAcceptedByManagement"
                     v-show="fileFollowUp.auctionAcceptedByManagement">
                    <label class="col-sm-4" style="padding-left: 0;">Date</label>
                    <div class="col-sm-8 date">
                        <div class="input-group date" data-provide="datepicker" data-date-format="dd-mm-yyyy">
                            <div class="input-group-addon">
                                <i class="fa fa-calendar"></i>
                            </div>
                            <input type="text" name="dateOfAuctionAcceptedByManagement"
                                   :disabled="isViewPage" v-model="fileFollowUp.dateOfAuctionAcceptedByManagement"
                                   class="form-control pull-right ffu-date" onchange="setPropertyValueFromInput(this)"
                                   placeholder="dd-mm-yyyy" readonly>
                        </div>
                    </div>
                </div>
            </div>


            <div class="form-group">
               <label class="col-sm-4">
                    Property Sold Through Auction
                </label>
                <div class="col-sm-2">
                    <select id="psta"
                            :disabled="isViewPage" v-model="fileFollowUp.propertySoldThroughAuction"
                            @change="clearFieldsWithFlag(
                                                fileFollowUp.propertySoldThroughAuction,
                                                'dateOfPropertySoldThroughAuction'
                                            )"
                            class="form-control">
                        <option :value="false">No</option>
                        <option :value="true">Yes</option>
                    </select>
                </div>
                <div class="col-sm-5" id="dateOfPropertySoldThroughAuction"
                     v-show="fileFollowUp.propertySoldThroughAuction">
                    <label class="col-sm-4" style="padding-left: 0;">Date</label>
                    <div class="col-sm-8 date">
                        <div class="input-group date" data-provide="datepicker" data-date-format="dd-mm-yyyy">
                            <div class="input-group-addon">
                                <i class="fa fa-calendar"></i>
                            </div>
                            <input type="text" name="dateOfPropertySoldThroughAuction"
                                   :disabled="isViewPage" v-model="fileFollowUp.dateOfPropertySoldThroughAuction"
                                   class="form-control pull-right ffu-date" onchange="setPropertyValueFromInput(this)"
                                   placeholder="dd-mm-yyyy" readonly>
                        </div>
                    </div>
                </div>
            </div>


            <div class="form-group">
               <label class="col-sm-4">
                    Auction Stayed
                </label>
                <div class="col-sm-2">
                    <select
                            :disabled="isViewPage" v-model="fileFollowUp.auctionStayed"
                            @change="clearFieldsWithFlag(
                                                fileFollowUp.auctionStayed,

                                            )"
                            class="form-control">
                        <option :value="false">No</option>
                        <option :value="true">Yes</option>
                    </select>
                </div>
                <div class="col-sm-5"
                     v-show="fileFollowUp.auctionStayed">
                    <div class="form-group">
                        <label class="col-sm-4">Case No </label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control input-sm"  autocomplete="85"
                                   :disabled="isViewPage" v-model="fileFollowUp.auctionStayedCaseNo" style="width: 106%;margin-left: 4px;"
                            />
                        </div>
                    </div>
                    <div v-for="(auctionStayedObj, index) in fileFollowUp.auctionStayedEntityList">
                        <div class="form-group">
                            <label class="col-sm-4">Date</label>

                            <div class="col-sm-5 date">

                                <div class="input-group date" >
                                    <div class="input-group-addon">
                                        <i class="fa fa-calendar"></i>
                                    </div>
                                    <vuejs-datepicker format="dd/MMM/yyyy" placeholder="dd/MMM/yyyy" id="auctionStayedDate" class="next" name="auctionStayedDate" v-model="auctionStayedObj.auctionStayedDate" ></vuejs-datepicker>
                                </div>
                            </div>

                            <div class="col-sm-3 pull-right">
                                <button type="button" @click="addNewAuctionStayed"
                                        class="pull-right btn btn-success btn-sm center-block" v-if="!isViewPage && fileFollowUp.auctionStayedEntityList.length - 1 == index">
                                    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                                </button>
                                <button @click="disableAuctaionStayed(auctionStayedObj),removeAuctionStayed(index)" v-if="fileFollowUp.auctionStayedEntityList.length > 1" type="button" class="pull-right btn btn-danger btn-sm center-block">
                                    <span class="glyphicon glyphicon-minus" aria-hidden="true"></span>
                                </button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <div class="form-group">
               <label class="col-sm-4">
                    Account Fully Adjusted Before Filing Artharin Suit
                </label>
                <div class="col-sm-2">
                    <select id="aabfas"
                            :disabled="isViewPage" v-model="fileFollowUp.accountAdjustedBeforeFilingArtharinSuit"
                            @change="clearFieldsWithFlag(
                                                fileFollowUp.accountAdjustedBeforeFilingArtharinSuit,
                                                'dateOfAccountAdjustedBeforeFilingArtharinSuit'
                                            )"
                            class="form-control">
                        <option :value="false">No</option>
                        <option :value="true">Yes</option>
                    </select>
                </div>
                <div class="col-sm-5" id="dateOfAccountAdjustedBeforeFilingArtharinSuit"
                     v-show="fileFollowUp.accountAdjustedBeforeFilingArtharinSuit">
                    <label class="col-sm-4" style="padding-left: 0;">Date</label>
                    <div class="col-sm-8 date">
                        <div class="input-group date" data-provide="datepicker" data-date-format="dd-mm-yyyy">
                            <div class="input-group-addon">
                                <i class="fa fa-calendar"></i>
                            </div>
                            <input type="text" name="dateOfAccountAdjustedBeforeFilingArtharinSuit"
                                   :disabled="isViewPage"
                                   v-model="fileFollowUp.dateOfAccountAdjustedBeforeFilingArtharinSuit"
                                   class="form-control pull-right ffu-date" onchange="setPropertyValueFromInput(this)"
                                   placeholder="dd-mm-yyyy" readonly>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
               <label class="col-sm-4">
                    Account Adjusted Amount
                </label>
                <div class="col-sm-8">
                    <input type="number" autocomplete="92"
                           :disabled="isViewPage" v-model="fileFollowUp.accountAdjustedAmount"
                           class="form-control"
                           placeholder="Account Adjusted Amount"/>
                </div>
            </div>

            <div class="form-group">
               <label class="col-sm-4">
                    Adjustment with Excess Amount
                </label>
                <div class="col-sm-8">
                    <input type="number" autocomplete="92"
                           :disabled="isViewPage" v-model="fileFollowUp.adjustedWithExcessAmount"
                           class="form-control"
                           placeholder=" Adjustment with Excess Amount"/>
                </div>
            </div>

            <div class="form-group">
               <label class="col-sm-4">
                    Amount After Partial Adjustment Through Auction
                </label>
                <div class="col-sm-4">
                    <input type="number" autocomplete="92"
                           :disabled="isViewPage" v-model="fileFollowUp.amountAfterPartialAdjustmentThroughAuction"
                           class="form-control"
                           placeholder="Partial adjustment amount"/>
                </div>
                <div class="col-sm-4" id="dateOfPartialAdjustmentThroughAuction"
                     v-show="fileFollowUp.amountAfterPartialAdjustmentThroughAuction">
                    <label class="col-sm-2">Date</label>
                    <div class="col-sm-10 date">
                        <div class="input-group date" data-provide="datepicker" data-date-format="dd-mm-yyyy">
                            <div class="input-group-addon">
                                <i class="fa fa-calendar"></i>
                            </div>
                            <input type="text" name="dateOfPartialAdjustmentThroughAuction"
                                   :disabled="isViewPage" v-model="fileFollowUp.dateOfPartialAdjustmentThroughAuction"
                                   class="form-control pull-right ffu-date" onchange="setPropertyValueFromInput(this)"
                                   placeholder="dd-mm-yyyy" readonly>
                        </div>
                    </div>
                </div>
            </div>

            <div v-for="(account,index) in fileFollowUp.fileFollowUpAccountResheduledList">
                <div class="form-group">
                   <label class="col-sm-4">
                        Account Rescheduled
                    </label>
                    <div class="col-sm-5">
                        <select id="ar"
                                :disabled="isViewPage" v-model="account.accountRescheduled"
                                class="form-control">
                            <option :value="false">No</option>
                            <option :value="true">Yes</option>
                        </select>
                    </div>
                    <div class="col-sm-2 pull-right">
                        <button type="button" @click="addAccountRepublished" v-if="!isViewPage && fileFollowUp.fileFollowUpAccountResheduledList.length - 1 == index"
                                class="pull-right btn btn-success btn-sm center-block" >
                            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                        </button>
                        <button @click="removeAccountRepublished(index),disbaleAccountRepublished(account)" v-if="fileFollowUp.fileFollowUpAccountResheduledList.length > 1" type="button" class="pull-right btn btn-danger btn-sm center-block">
                            <span class="glyphicon glyphicon-minus" aria-hidden="true"></span>
                        </button>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-4"></div>
                    <div class="col-sm-8">
                        <div class="form-group" v-show="account.accountRescheduled">
                           <label class="col-sm-4">Date</label>
                            <div class="col-sm-8 date">
                                <div class="input-group date" >
                                    <div class="input-group-addon">
                                        <i class="fa fa-calendar"></i>
                                    </div>
                                    <vuejs-datepicker format="dd/MMM/yyyy" id="dateOfAccountRescheduled"
                                                      placeholder="dd/MMM/yyyy" name="dateOfAccountRescheduled" v-model="account.dateOfAccountRescheduled" ></vuejs-datepicker>
                                </div>
                            </div>
                        </div>
                        <div class="form-group" v-show="account.accountRescheduled">
                           <label class="col-sm-4">Installment Size </label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control input-sm" autocomplete="85"
                                       :disabled="isViewPage" v-model="account.installmentSize"
                                />
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4"></div>
                    <div class="col-sm-8">
                        <div class="form-group" v-show="account.accountRescheduled">
                           <label class="col-sm-4">Number Of Installment </label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control input-sm" autocomplete="85"
                                       :disabled="isViewPage" v-model="account.numberOfInstallment"
                                />
                            </div>
                        </div>
                        <div class="form-group" v-show="account.accountRescheduled">
                           <label class="col-sm-4">Tenure </label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control input-sm" autocomplete="85"
                                       :disabled="isViewPage" v-model="account.tenure"
                                />
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
               <label class="col-sm-4">
                    NI Act Case Filed
                </label>
                <div class="col-sm-2">
                    <select id=""
                            :disabled="isViewPage" v-model="fileFollowUp.niActCaseFiled"
                            @change="clearFieldsWithFlag(
                                                fileFollowUp.niActCaseFiled,

                                            )"
                            class="form-control">
                        <option :value="false">No</option>
                        <option :value="true">Yes</option>
                    </select>
                </div>
                <div class="col-sm-5"
                     v-show="fileFollowUp.niActCaseFiled">
                    <div class="form-group">
                       <label class="col-sm-4">Date</label>
                        <div class="col-sm-7 date">
                            <div class="input-group date" data-provide="datepicker" data-date-format="dd-mm-yyyy">
                                <div class="input-group-addon">
                                    <i class="fa fa-calendar"></i>
                                </div>
                                <input type="text" name="niActCaseFiledDate"
                                       :disabled="isViewPage"
                                       v-model="fileFollowUp.niActCaseFiledDate"
                                       class="form-control pull-right ffu-date" onchange="setPropertyValueFromInput(this)"
                                       placeholder="dd-mm-yyyy" readonly>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                       <label class="col-sm-4">Case No </label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control input-sm" autocomplete="85"
                                   :disabled="isViewPage" v-model="fileFollowUp.niActCaseNo"
                            />
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
               <label class="col-sm-4">
                    ARS Filed
                </label>
                <div class="col-sm-2">
                    <select id=""
                            :disabled="isViewPage" v-model="fileFollowUp.arsFiled"
                            @change="clearFieldsWithFlag(
                                                fileFollowUp.arsFiled,

                                            )"
                            class="form-control">
                        <option :value="false">No</option>
                        <option :value="true">Yes</option>
                    </select>
                </div>
                <div class="col-sm-5"
                     v-show="fileFollowUp.arsFiled">
                    <div class="form-group">
                       <label class="col-sm-4">Filing Date</label>
                        <div class="col-sm-7 date">
                            <div class="input-group date" data-provide="datepicker" data-date-format="dd-mm-yyyy">
                                <div class="input-group-addon">
                                    <i class="fa fa-calendar"></i>
                                </div>
                                <input type="text" name="arsFiledDate"
                                       :disabled="isViewPage"
                                       v-model="fileFollowUp.arsFiledDate"
                                       class="form-control pull-right ffu-date" onchange="setPropertyValueFromInput(this)"
                                       placeholder="dd-mm-yyyy" readonly>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                       <label class="col-sm-4">Case No </label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control input-sm" autocomplete="85"
                                   :disabled="isViewPage" v-model="fileFollowUp.arsFiledCaseNo"
                            />
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group" >
               <label class="col-sm-4">
                    Total Legal Expense Amount
                </label>
                <div class="col-sm-8">
                    <input type="number" name="fileFollowUp.totalLegalExpenseAmount" autocomplete="108" class="form-control" :readonly="isViewPage"
                           placeholder="Total Legal Expense Amount"
                           :value="totalLegalExpenseAmount"/>
                </div>
            </div>
            <div v-for="(legal, index) in fileFollowUp.fileFollowUpLegalExpenseEntityList">
                <div class="form-group">
                   <label class="col-sm-4 ">
                        Legal Expenses
                    </label>
                    <div class="col-sm-5">
                        <multiselect v-model="legal.fileFollowUpLegalExpenseEntityList"
                                     placeholder="Select Legal Expense"
                                     label="legalExpenseName" track-by="id"
                                     :options="legalExpenses" @input="getSelectedLegalExpenseId(legal,index)"
                                     :multiple="false" :taggable="true" :disabled="isViewPage">
                        </multiselect>
                    </div>
                    <div class="col-sm-2">
                        <button type="button" @click="addNewLegalExpense"
                                class="pull-left btn btn-success btn-sm center-block" v-if="!isViewPage && fileFollowUp.fileFollowUpLegalExpenseEntityList.length - 1 == index">
                            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                        </button>
                        <button @click="disbaleLegalSec(legal),removeLegalExpense(index)" v-if="fileFollowUp.fileFollowUpLegalExpenseEntityList.length > 1" type="button" class="pull-right btn btn-danger btn-sm center-block">
                            <span class="glyphicon glyphicon-minus" aria-hidden="true"></span>
                        </button>
                    </div>
                </div>

                <div class="form-group" v-show="isUtilityBill(index) || isMiscellaneousCost(index) || isMediationCost(index) || isProfessionalFee(index) || isCourtFee(index) || isCollectionOfCertifiedCopy(index)">
                   <label class="col-sm-4 text-right">Date</label>
                    <div class="col-sm-5 date">
                        <div class="input-group date" >
                            <div class="input-group-addon">
                                <i class="fa fa-calendar"></i>
                            </div>
                            <vuejs-datepicker format="dd/MMM/yyyy" id="legalExpenseDate" placeholder="dd/MMM/yyyy" name="legalExpenseDate" v-model="legal.legalExpenseDate" ></vuejs-datepicker>
                        </div>
                    </div>
                </div>

                <div class="form-group"  v-show="isMediationCost(index) || isMiscellaneousCost(index) || isUtilityBill(index) || isProfessionalFee(index) || isCourtFee(index) || isPaperPublication(index) || isCollectionOfCertifiedCopy(index)">
                   <label class="col-sm-4 text-right">
                        Bill Received Amount
                    </label>
                    <div class="col-sm-8">
                        <input type="number" name="legalAmount" autocomplete="108" class="form-control" :readonly="isViewPage"
                               placeholder="Amount" @keyup="calculateTotal"
                               v-model="legal.legalAmount"/>
                    </div>
                </div>

                <div class="form-group"  v-show="isProfessionalFee(index) || isPaperPublication(index)">
                   <label class="col-sm-4 text-right">
                        AIT
                    </label>
                    <div class="col-sm-8">
                        <input type="number" name="legalAitFee" autocomplete="108" class="form-control" :readonly="isViewPage"
                               @keyup="calculateTotal" v-model="legal.legalAitFee"/>
                    </div>
                </div>

                <div class="form-group"  v-show="isProfessionalFee(index) || isCourtFee(index) || isPaperPublication(index)">
                   <label class="col-sm-4 text-right">
                        VAT @15%
                    </label>
                    <div class="col-sm-8">
                        <input type="number" name="legalVat" autocomplete="108" class="form-control" :readonly="isViewPage"
                               placeholder="VAT @15% " @keyup="calculateTotal"
                               v-model="legal.legalVat"/>
                    </div>
                </div>


                <!--type of fee-->
                <div class="form-group" v-show="isProfessionalFee(index)">
                   <label class="col-sm-4 text-right">Type Of Fee (Lawyer Fee/Legal Notice</label>
                    <div class="col-sm-8">
                        <multiselect v-model="legal.typeOfFee"
                                     placeholder="Select type of fee"
                                     :options="['Lawyer Fee','Legal Notice']" :show-labels="false"
                                     :searchable="false" :taggable="true" :disabled="isViewPage">
                        </multiselect>
                    </div>
                </div>

                <div class="form-group"  v-show="isProfessionalFee(index) && legal.typeOfFee == 'Legal Notice'">
                   <label class="col-sm-4 text-right">Number Of Legal Notice Served</label>
                    <div class="col-sm-8">
                        <input type="number" name="numberOfLegalNoticeServed" autocomplete="108" class="form-control" :readonly="isViewPage"
                               placeholder="Number of Legal Notice Served"
                               v-model="legal.numberOfLegalNoticeServed"/>
                    </div>
                </div>

                <div class="form-group" v-show="isProfessionalFee(index) && legal.typeOfFee == 'Lawyer Fee'">
                   <label class="col-sm-4 text-right">Paying Now (%)</label>
                    <div class="col-sm-8">
                        <input type="number" name="payingNow" autocomplete="108" class="form-control" :readonly="isViewPage"
                               placeholder="Paying now (%)"
                               v-model="legal.payingNow"/>
                    </div>
                </div>

                <div class="form-group"  v-show="isProfessionalFee(index)">
                   <label class="col-sm-4 text-right">
                        Total Payable Amount
                    </label>
                    <div class="col-sm-8">
                        <input type="number" name="totalPayableAmount" autocomplete="108" class="form-control" :readonly="isViewPage"
                               placeholder="Total Payable Amount"
                               v-model="legal.totalPayableAmount"/>
                    </div>
                </div>

                <!--court fee-->

                <div class="form-group"  v-show="isCourtFee(index)">
                   <label class="col-sm-4 text-right">
                        Procurement Cost
                    </label>
                    <div class="col-sm-8">
                        <input type="number" name="procurementCost" autocomplete="108" class="form-control" :readonly="isViewPage"
                               placeholder="Procurement Cost" @keyup="calculateTotal"
                               v-model="legal.procurementCost"/>
                    </div>
                </div>

                <!--Paper publication-->
                <div class="form-group" v-if="isPaperPublication(index)">
                   <label class="col-sm-4 text-right">Type Of Publication(Auction/Summon Notice)</label>
                    <div class="col-sm-8">
                        <multiselect v-model="legal.typeOfPublication"
                                     placeholder="Select Paper Publication"
                                     :options="['Auction','Summon Notice']" :show-labels="false"
                                     :searchable="false" :taggable="true" :disabled="isViewPage">
                        </multiselect>
                    </div>
                </div>

                <div class="form-group"  v-if="isPaperPublication(index) && legal.typeOfPublication == 'Auction'">
                   <label class="col-sm-4 text-right">Auction Date</label>
                    <div class="col-sm-7 date">
                        <div class="input-group date" >
                            <div class="input-group-addon">
                                <i class="fa fa-calendar"></i>
                            </div>
                            <vuejs-datepicker format="dd/MMM/yyyy" id="paperPublicationAuctionDate" placeholder="dd/MMM/yyyy" name="paperPublicationAuctionDate" v-model="legal.paperPublicationAuctionDate" ></vuejs-datepicker>
                        </div>
                    </div>
                </div>

                <div class="form-group"  v-if="isPaperPublication(index) && legal.typeOfPublication == 'Summon Notice'">
                   <label class="col-sm-4 text-right">Publication Date</label>
                    <div class="col-sm-7 date">
                        <div class="input-group date" >
                            <div class="input-group-addon">
                                <i class="fa fa-calendar"></i>
                            </div>
                            <vuejs-datepicker format="dd/MMM/yyyy" id="publicationDate" placeholder="dd/MMM/yyyy" name="publicationDate" v-model="legal.publicationDate" ></vuejs-datepicker>
                        </div>
                    </div>
                </div>


                <div class="form-group"  v-show="isPaperPublication(index)">
                   <label class="col-sm-4 text-right">
                        Section Of ARA
                    </label>
                    <div class="col-sm-8">
                        <input type="text" name="sectionOfAra" autocomplete="108" class="form-control" :readonly="isViewPage"
                               placeholder="Section of ARA"
                               v-model="legal.sectionOfAra"/>
                    </div>
                </div>

                <div class="form-group"  v-show="isPaperPublication(index)">
                   <label class="col-sm-4 text-right">
                        Paper Name
                    </label>
                    <div class="col-sm-8">
                        <input type="text" name="paperName" autocomplete="108" class="form-control" :readonly="isViewPage"
                               placeholder="paperName"
                               v-model="legal.paperName"/>
                    </div>
                </div>

                <div class="form-group"  v-show="isPaperPublication(index)">
                   <label class="col-sm-4 text-right">
                        Agency/BLA Name
                    </label>
                    <div class="col-sm-8">
                        <input type="text" name="agencyBlaName" autocomplete="108" class="form-control" :readonly="isViewPage"
                               placeholder="Agency/BLA Name"
                               v-model="legal.agencyBlaName"/>
                    </div>
                </div>

                <!--collection of certified copy-->
                <div class="form-group"  v-show="isCollectionOfCertifiedCopy(index)">
                   <label class="col-sm-4 text-right">
                        Name Of Document
                    </label>
                    <div class="col-sm-8">
                        <input type="text" name="nameOfDocument" autocomplete="108" class="form-control" :readonly="isViewPage"
                               placeholder="Name of Document"
                               v-model="legal.nameOfDocument"/>
                    </div>
                </div>

                <!--Utility Bill-->

                <div class="form-group"  v-show="isUtilityBill(index)">
                   <label class="col-sm-4 text-right">
                        Service Name
                    </label>
                    <div class="col-sm-8">
                        <input type="text" name="serviceName" autocomplete="108" class="form-control" :readonly="isViewPage"
                               placeholder="Service Name"
                               v-model="legal.serviceName"/>
                    </div>
                </div>

                <!--Mediation Cost-->
                <div class="form-group"  v-show="isMediationCost(index)">
                   <label class="col-sm-4 text-right">
                        Mediation Name
                    </label>
                    <div class="col-sm-8">
                        <input type="text" name="mediationName" autocomplete="108" class="form-control" :readonly="isViewPage"
                               placeholder="Mediation name"
                               v-model="legal.mediationName"/>
                    </div>
                </div>

                <div class="form-group" v-show="isMediationCost(index)">
                   <label class="col-sm-4 text-right">Mediation Submission Date</label>
                    <div class="col-sm-5 date">
                        <div class="input-group date" >
                            <div class="input-group-addon">
                                <i class="fa fa-calendar"></i>
                            </div>
                            <vuejs-datepicker format="dd/MMM/yyyy" id="mediationSubmissionDate" placeholder="dd/MMM/yyyy" name="mediationSubmissionDate" v-model="legal.mediationSubmissionDate" ></vuejs-datepicker>
                        </div>
                    </div>
                </div>


                <div class="form-group"  v-show="isMediationCost(index)">
                   <label class="col-sm-4 text-right">
                        Result Of Mediation
                    </label>
                    <div class="col-sm-8">
                        <input type="text" name="resultOfMediation" autocomplete="108" class="form-control" :readonly="isViewPage"
                               placeholder="Mediation name"
                               v-model="legal.resultOfMediation"/>
                    </div>
                </div>


                <!--remark expense-->
                <div class="form-group"  v-show="isMediationCost(index) || isMiscellaneousCost(index) || isUtilityBill(index) || isProfessionalFee(index) || isCourtFee(index) || isPaperPublication(index) || isCollectionOfCertifiedCopy(index)">
                   <label class="col-sm-4 text-right">
                        Remarks
                    </label>
                    <div class="col-sm-8">
                    <textarea type="text" name="legalRemarks" autocomplete="108" class="form-control" :readonly="isViewPage"
                              placeholder="Remarks"
                              v-model="legal.legalRemarks"></textarea>
                    </div>
                </div>

            </div>


            <div class="form-group">
               <label class="col-sm-4 required">Stay Status:</label>
                <div class="col-sm-8">
                    <multiselect v-model="fileFollowUp.stayStatus"
                                 placeholder="Select Stay Status By"
                                 :options="['Pending','Discharged','Absolute']" :show-labels="false"
                                 :searchable="false" :taggable="true" :disabled="isViewPage">
                    </multiselect>
                </div>
            </div>
        </div>

        <!-- /.box-body -->
        <div class="box-footer">
            <span class="pull-right">
                <button type="button" @click="goToList()" class="btn btn-danger">
                    CANCEL
                </button>
                <button v-if="!isViewPage" type="button" @click="save" class="btn btn-primary">
                    SAVE
                </button>
                <button v-if="isViewPage" type="button" @click="isViewPage = false"
                        class="btn btn-info">
                    UPDATE
                </button>
            </span>
        </div>
        <!-- /.box-footer -->
    </form>
    <script th:inline="javascript">
        /*<![CDATA[*/
        var fileFollowUp = /*[[${fileFollowUp}]]*/ {};
        var legalExpenseList = /*[[${legalExpense}]]*/ [];
        var view = /*[[${view}]]*/ {};
        var edit = /*[[${edit}]]*/ {};
        /*]]>*/

        window.addEventListener('beforeunload', function (e) {
            e.preventDefault();
            e.returnValue = '';
        });

    </script>

    <script th:inline="javascript"  type="application/javascript">
        var fileFollowUpApp = new Vue({
            el: '#fileFollowUpApp',
            components: {
                Multiselect: VueMultiselect.default,
                vuejsDatepicker
            },
            data: {
                accountNumber: '', //accountNo is defined in the page header section
                fileFollowUp: {},
                //auctionTestArray:[],
                errors: {},
                legalExpenses : [],
                isViewPage: false,
                isEditPage: false,
                isLoading: false,
                isFirstTime: true,
                districts: [],
                divisions: [],
                zone: {},
                zones: [],
                branch: {},
                branches: [],
                total : 0,
                collateralSecurities: []
            },
            created: function () {
                this.setInitialValues();
                this.setLegalExpense();
                this.getDistrictsFromServer();
                this.getDivisionsFromServer();
                this.getZonesFromServer();
                this.getBranchesFromServer();
                this.getColateralSecutiryFromServer();
            },
            computed:{
                isProfessionalFee: function () {
                    return function(index){
                        if(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].legalExpenseName != undefined) {
                            if(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].legalExpenseName == 'Professional Fee'){
                                return true;
                            }else {
                                return false;
                            }
                        }
                    }
                },
                isCourtFee: function () {
                    return function(index){
                        //return this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].fileFollowUpLegalExpenseEntityList && this.isEqual(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].fileFollowUpLegalExpenseEntityList.legalExpenseName, 'Court Fee');
                        if(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].legalExpenseName != undefined) {
                            if(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].legalExpenseName == 'Court Fee'){
                                return true;
                            }else {
                                return false;
                            }
                        }
                    }
                },
                isPaperPublication: function () {
                    return function(index){
                        //return this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].fileFollowUpLegalExpenseEntityList && this.isEqual(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].fileFollowUpLegalExpenseEntityList.legalExpenseName, 'Paper Publication');
                        if(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].legalExpenseName != undefined) {
                            if(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].legalExpenseName == 'Paper Publication'){
                                return true;
                            }else {
                                return false;
                            }
                        }
                    }
                },

                isCollectionOfCertifiedCopy: function () {
                    return function(index){
                        //return this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].fileFollowUpLegalExpenseEntityList && this.isEqual(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].fileFollowUpLegalExpenseEntityList.legalExpenseName, 'Collection of Certified Copy');
                        if(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].legalExpenseName != undefined) {
                            if(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].legalExpenseName == 'Collection of Certified Copy'){
                                return true;
                            }else {
                                return false;
                            }
                        }
                    }
                },
                isUtilityBill: function () {
                    return function(index){
                        // return this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].fileFollowUpLegalExpenseEntityList && this.isEqual(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].fileFollowUpLegalExpenseEntityList.legalExpenseName, 'Utility Bill');
                        if(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].legalExpenseName != undefined) {
                            if(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].legalExpenseName == 'Utility Bill'){
                                return true;
                            }else {
                                return false;
                            }
                        }
                    }
                },
                isMiscellaneousCost: function () {
                    return function(index){
                        //return this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].fileFollowUpLegalExpenseEntityList && this.isEqual(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].fileFollowUpLegalExpenseEntityList.legalExpenseName, 'Miscellaneous Cost');
                        if(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].legalExpenseName != undefined) {
                            if(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].legalExpenseName == 'Miscellaneous Cost'){
                                return true;
                            }else {
                                return false;
                            }
                        }
                    }
                },
                isMediationCost: function () {
                    return function(index){
                        //return this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].fileFollowUpLegalExpenseEntityList && this.isEqual(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].fileFollowUpLegalExpenseEntityList.legalExpenseName, 'Mediation Cost');
                        if(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].legalExpenseName != undefined) {
                            if(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].legalExpenseName == 'Mediation Cost'){
                                return true;
                            }else {
                                return false;
                            }
                        }
                    }
                },
                totalLegalExpenseAmount: function(){
                    this.total = 0;

                    for (i = 0; i < this.fileFollowUp.fileFollowUpLegalExpenseEntityList.length; i++) {
                        this.total += (!isNaN(Number(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].legalAmount)) ? Number(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].legalAmount) : 0)
                            + (!isNaN(Number(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].legalVat)) ? Number(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].legalVat) : 0)
                            + (!isNaN(Number(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].legalAitFee)) ? Number(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].legalAitFee) : 0)
                            + (!isNaN(Number(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].procurementCost)) ? Number(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].procurementCost) : 0);

                    }
                    return this.total;

                },
                getBranchesByZone: function () {
                    if (this.zone.name) {
                        this.fileFollowUp.zone = this.zone.name;
                        return this.zone.branches;
                    } else {
                        return this.branches;
                    }
                },

                getDistrictsByDivision: function () {
                    let filteredDistricts = [];
                    if (this.fileFollowUp.division) {
                        console.log(this.filterOptions(this.districts, 'divisionName', this.fileFollowUp.division))
                        filteredDistricts = this.filterOptions(this.districts, 'divisionName', this.fileFollowUp.division);
                    }
                    else {
                        filteredDistricts = this.districts;
                    }
                    return filteredDistricts.map(item => {
                        return item.name;
                    });
                },

                isFixedAssetCollateralSecurity: function () {
                    return function(index){
                        if(this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList[index].collateralSecurityName != undefined) {
                            if(this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList[index].collateralSecurityName == 'Fixed Assets/ Machineries'){
                                return true;

                            }else {
                                return false;
                            }
                        }
                    }
                },

                isOtherCollateralSecurity: function () {
                    return function(index){
                        if(this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList[index].collateralSecurityName != undefined) {
                            if(this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList[index].collateralSecurityName == 'Others'){
                                return true;

                            }else {
                                return false;
                            }
                        }
                    }
                },
                isNoSecurity: function () {
                    return function(index){
                        if(this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList[index].collateralSecurityName != undefined) {
                            if(this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList[index].collateralSecurityName == 'No Security'){
                                return true;

                            }else {
                                return false;
                            }
                        }
                    }
                },
                isPledge: function () {
                    return function(index){
                        if(this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList[index].collateralSecurityName != undefined) {
                            if(this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList[index].collateralSecurityName == 'Pledge'){
                                return true;

                            }else {
                                return false;
                            }
                        }
                    }
                },
                isLien: function () {
                    return function(index){
                        if(this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList[index].collateralSecurityName != undefined) {
                            if(this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList[index].collateralSecurityName == 'Lien'){
                                return true;

                            }else {
                                return false;
                            }
                        }
                    }
                },
               /* isLien: function () {
                    return function(index){
                        if(this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList[index].collateralSecurityName != undefined) {
                            if(this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList[index].collateralSecurityName == 'Lien'){

                                return true;
                            }else {
                                return false;
                            }
                        }
                    }
                },*/
                isFlatHouseBuilding: function () {
                    return function(index){
                        if(this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList[index].collateralSecurityName != undefined) {
                            if(this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList[index].collateralSecurityName == 'Flat/ House/ Building'){
                                return true;

                            }else {
                                return false;
                            }
                        }
                    }
                },
                isLand: function () {
                    return function(index){
                        if(this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList[index].collateralSecurityName != undefined) {
                            if(this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList[index].collateralSecurityName == 'Land'){
                                return true;

                            }else {
                                return false;
                            }
                        }
                    }
                },

            },
            watch:{
                fileFollowUp: function(){
                    if (this.isFirstTime) {
                        this.isFirstTime = false;

                        /*legal expense by shahin*/

                        for (i = 0; i < this.fileFollowUp.fileFollowUpLegalExpenseEntityList.length; i++) {
                            this.$set(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i], 'fileFollowUpLegalExpenseEntityList', {'id':this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].legalExpenseId , 'legalExpenseName':this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].legalExpenseName});
                        }

                        for (i = 0; i < this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList.length; i++) {
                            this.$set(this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList[i], 'fileFollowUpCollateralSecurityDetailsList', {'id':this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList[i].collateralSecurityId , 'name':this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList[i].collateralSecurityName});
                        }

                    }
                },
                zones: function () {
                    const zoneName = this.fileFollowUp ? this.fileFollowUp.zone : '';
                    if (zoneName) {
                        const zones = this.zones.filter(zone => zoneName === zone.name);
                        this.zone = zones.length ? zones[0] : {};
                    }
                },
            },
            methods: {
                calculateTotal(){
                    this.total = 0;

                    for (i = 0; i < this.fileFollowUp.fileFollowUpLegalExpenseEntityList.length; i++) {
                        this.total += (!isNaN(Number(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].legalAmount)) ? Number(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].legalAmount) : 0)
                            + (!isNaN(Number(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].legalVat)) ? Number(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].legalVat) : 0)
                            + (!isNaN(Number(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].legalAitFee)) ? Number(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].legalAitFee) : 0)
                            + (!isNaN(Number(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].procurementCost)) ? Number(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].procurementCost) : 0);

                    }
                },
                getSelectedLegalExpenseId(legal,index){
                    legal.legalExpenseId = !!this.fileFollowUp.fileFollowUpLegalExpenseEntityList ? this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].fileFollowUpLegalExpenseEntityList.id : '';
                    legal.legalExpenseName = !!this.fileFollowUp.fileFollowUpLegalExpenseEntityList ? this.fileFollowUp.fileFollowUpLegalExpenseEntityList[index].fileFollowUpLegalExpenseEntityList.legalExpenseName : '';

                    legal.legalAmount = 0;
                    legal.legalVat = 0;
                    legal.legalAitFee = 0;
                    legal.procurementCost = 0;
                    this.fileFollowUp.fileFollowUpLegalExpenseEntityList.splice(index,1,legal);

                    this.calculateTotal();


                },

                getSelectedCollateralSecurityId(security,index){

                    security.collateralSecurityId = !!this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList[index].fileFollowUpCollateralSecurityDetailsList ? this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList[index].fileFollowUpCollateralSecurityDetailsList.id : '';
                    security.collateralSecurityName = !!this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList[index].fileFollowUpCollateralSecurityDetailsList ? this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList[index].fileFollowUpCollateralSecurityDetailsList.name : '';
                },
                setLegalExpense : function(){
                    this.legalExpenses = Array.isArray(legalExpenseList) ? legalExpenseList : [];
                },
                addNewLegalExpense: function(){
                    this.fileFollowUp.fileFollowUpLegalExpenseEntityList.push({/*errors: "Please insert non empty legal expense"*/});
                },
                removeLegalExpense: function(index){
                    this.fileFollowUp.fileFollowUpLegalExpenseEntityList.splice(index,1)
                },
                disbaleLegalSec(legal){
                    legal.enabled = 0;
                    legal.deleted = 1;

                },
                addNewAuctionStayed: function(){
                    this.fileFollowUp.auctionStayedEntityList.push({/*errors: "Please insert non empty legal expense"*/});
                },
                removeAuctionStayed: function(index){
                    this.fileFollowUp.auctionStayedEntityList.splice(index,1)
                },
                disableAuctaionStayed(auctionStayedObj){
                    auctionStayedObj.enabled = 0;
                    auctionStayedObj.deleted = 1;

                },

                setInitialValues: function () {
                    this.accountNumber = this.is360Page() ? accountNo : '';
                    this.isViewPage = typeof view === 'boolean' ? view : view === 'true';
                    this.isEditPage = typeof edit === 'boolean' ? edit : edit === 'true';
                    this.fileFollowUp = typeof fileFollowUp === 'object' ? $.extend(true, {}, fileFollowUp) : {};
                    if(!this.isEditPage && !this.isViewPage) {
                        this.fileFollowUp.auctionNoticePublishedEntityList = [{}];
                        this.fileFollowUp.fileFollowUpLegalExpenseEntityList = [{}];
                        this.fileFollowUp.auctionStayedEntityList = [{}];
                        this.fileFollowUp.fileFollowUpAccountResheduledList = [{}];
                        this.fileFollowUp.fileFollowUpLegalNoticeServedForArtharinSuits = [{}];
                        this.fileFollowUp.fileFollowUpLegalNoticeServedNIActs = [{}];
                        this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList = [{}];
                    }
                },
                is360Page: function () {
                    return typeof accountNo !== 'undefined';
                },
                clearFieldsWithFlag: function (flag, ...fields) {
            let model = this.fileFollowUp;
            if (!flag) fields.forEach(field => model[field] = null);
        },

        getColateralSecutiryFromServer: function () {
            let vm = this;
            vm.isLoading = true;
            let host = window.location.host;
            let url = 'https://' + host + '/legal/data-entry/litigation-file-follow-up/rest/collateral-security';
            vm.$http.get(url)
                .then(res => {
                if (res.ok) {
                let contentType = res.headers.get("Content-Type");
                if (contentType.includes("text/html")) {
                    swal("No collateral security found");
                    return;
                }
                vm.collateralSecurities = Array.isArray(res.body) ? res.body : [];
                vm.isLoading = false;
            }
        }).catch(err => {
            })
        },

        getAccountInfoFromApi: function () {
            let accountNo = this.fileFollowUp.loanAccountNumber;
            if (!accountNo || typeof accountNo !== 'string') return;
            let vm = this;
            vm.loading = true;
            let host = window.location.host;
            let url = 'https://' + host + '/legal/data-entry/litigation-file-follow-up/rest/account-info?accountNo=' + accountNo;
            vm.$http.get(url)
                .then(res => {
                if (res.ok) {
                let contentType = res.headers.get("Content-Type");
                if (contentType.includes("text/html")) {
                    swal("Failed to get account information from API");
                    return;
                }
                // let caseInfo = vm.fileFollowUp;
                let accountInfo = res.body;
                console.log(res.body);

                vm.fileFollowUp.branchCode = isValue(accountInfo.branchCode) ? accountInfo.branchCode : vm.fileFollowUp.branchCode;
                vm.fileFollowUp.branchName = isValue(accountInfo.branchName) ? accountInfo.branchName : vm.fileFollowUp.branchName;
                vm.fileFollowUp.accountName = isValue(accountInfo.accountName) ? accountInfo.accountName : vm.fileFollowUp.accountName;
                vm.fileFollowUp.borrowerName = isValue(accountInfo.borrowerName) ? accountInfo.borrowerName : vm.fileFollowUp.borrowerName;
                vm.fileFollowUp.customerCifNumber = isValue(accountInfo.customerCifNumber) ? accountInfo.customerCifNumber : vm.fileFollowUp.customerCifNumber;
                vm.fileFollowUp.customerMobileNumber = isValue(accountInfo.customerMobileNumber) ? accountInfo.customerMobileNumber : vm.fileFollowUp.customerMobileNumber;
                vm.fileFollowUp.businessSegment = isValue(accountInfo.businessSegment) ? accountInfo.businessSegment : vm.fileFollowUp.businessSegment;
                vm.fileFollowUp.loanOutstanding = isValue(accountInfo.loanOutstanding) ? accountInfo.loanOutstanding : vm.fileFollowUp.loanOutstanding;


                console.log(vm.fileFollowUp);
                vm.loading = false;
            }
        }).catch(err => {
                console.log(err);
        })
        },
        goToList: function () {
            if (this.is360Page()) {
                this.fileFollowUp = $.extend(true, {}, fileFollowUp);
            }
            else {
                disableWindowFocusLossNotification();
                window.location.href = '/legal/data-entry/litigation-file-follow-up/list';
            }

        },

        setBranchProperties: function () {
            this.fileFollowUp.branchName = this.branch.branchName;
            this.fileFollowUp.branchCode = this.branch.branchCode;
        },


        setExistingBranchAsSelected: function () {
            let branchName = this.fileFollowUp.branchName;
            if (branchName) {
                let oldBranch = this.branches.filter(branch => branch.branchName === branchName);
                this.branch = oldBranch.length ? oldBranch[0] : null;
            }
        },


        getDistrictsFromServer: function () {
            let vm = this;
            vm.isLoading = true;
            let host = window.location.host;
            let url = 'https://' + host + '/legal/data-entry/litigation-file-follow-up/rest/districts';
            vm.$http.get(url)
                .then(res => {
                if (res.ok) {
                let contentType = res.headers.get("Content-Type");
                if (contentType.includes("text/html")) {
                    swal("Error loading district");
                    return;
                }
                vm.districts = Array.isArray(res.body) ? res.body : [];
                vm.isLoading = false;
            }
        }).catch(err => {
            })
        },
        getDivisionsFromServer: function () {
            let vm = this;
            vm.isLoading = true;
            let host = window.location.host;
            let url = 'https://' + host + '/legal/data-entry/litigation-file-follow-up/rest/divisions';
            vm.$http.get(url)
                .then(res => {
                if (res.ok) {
                let contentType = res.headers.get("Content-Type");
                if (contentType.includes("text/html")) {
                    swal("Error loading division");
                    return;
                }
                vm.divisions = Array.isArray(res.body) ? res.body : [];
                vm.isLoading = false;
            }
        }).catch(err => {
            })
        },
        getZonesFromServer: function () {
            let vm = this;
            vm.isLoading = true;
            let host = window.location.host;
            let url = 'https://' + host + '/legal/data-entry/litigation-file-follow-up/rest/zones';
            vm.$http.get(url)
                .then(res => {
                if (res.ok) {
                let contentType = res.headers.get("Content-Type");
                if (contentType.includes("text/html")) {
                    swal("Error loading division");
                    return;
                }
                vm.zones = Array.isArray(res.body) ? res.body : [];
                vm.isLoading = false;
            }
        }).catch(err => {
            })
        },
        getBranchesFromServer: function () {
            let vm = this;
            vm.isLoading = true;
            let host = window.location.host;
            let url = 'https://' + host + '/legal/data-entry/litigation-file-follow-up/rest/branches';
            vm.$http.get(url)
                .then(res => {
                if (res.ok) {
                let contentType = res.headers.get("Content-Type");
                if (contentType.includes("text/html")) {
                    swal("Error loading branches");
                    return;
                }
                vm.branches = Array.isArray(res.body) ? res.body : [];
                this.setExistingBranchAsSelected();
                vm.isLoading = false;
            }
        }).catch(err => {
            })
        },


        filterOptions: function (masterArray, filterableFieldName, conditionalValue) {
            return filterObjectOptions(masterArray, filterableFieldName, conditionalValue);
        },


        reset: function () {
            this.fileFollowUp = typeof fileFollowUp === 'object' ? $.extend(true, {}, fileFollowUp) : {};
        },
        save: function (e) {
            e.preventDefault();
            if(this.isLoading) return; // Prevent continuous save button click

            function formatDate(dateString_yyyy_mm_dd, delimeter = "/") {
                //console.log("ptp date : "+dateString_yyyy_mm_dd)
                let date = new Date(dateString_yyyy_mm_dd);
                return endureTwoDigitDay(date.getDate()) + delimeter + shortMonthNames[date.getMonth()] + delimeter + date.getFullYear();
            }

            for(i = 0; i< this.fileFollowUp.auctionNoticePublishedEntityList.length; i++){
                if(formatDate(this.fileFollowUp.auctionNoticePublishedEntityList[i].auctionNoticePublishedDate) !='/undefined/NaN') {
                    if(formatDate(this.fileFollowUp.auctionNoticePublishedEntityList[i].auctionNoticePublishedDate) !='01/Jan/1970')
                    this.fileFollowUp.auctionNoticePublishedEntityList[i].auctionNoticePublishedDate = formatDate(this.fileFollowUp.auctionNoticePublishedEntityList[i].auctionNoticePublishedDate);
                }
            }

            for(i = 0; i< this.fileFollowUp.fileFollowUpLegalExpenseEntityList.length; i++){
                this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].fileFollowUpLegalExpenseEntityList = null;
            }

            for(i = 0; i< this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList.length; i++){
                this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList[i].fileFollowUpCollateralSecurityDetailsList = null;
            }

            for(i = 0; i< this.fileFollowUp.fileFollowUpLegalExpenseEntityList.length; i++){
                if(formatDate(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].legalExpenseDate) !='/undefined/NaN') {
                    if(formatDate(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].legalExpenseDate) !='01/Jan/1970')
                    this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].legalExpenseDate = formatDate(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].legalExpenseDate);
                }
                if(formatDate(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].paperPublicationAuctionDate) !='/undefined/NaN') {
                    if(formatDate(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].paperPublicationAuctionDate) !='01/Jan/1970')
                    this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].paperPublicationAuctionDate = formatDate(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].paperPublicationAuctionDate);
                }
                if(formatDate(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].publicationDate) !='/undefined/NaN') {
                    if(formatDate(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].publicationDate) !='01/Jan/1970')
                    this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].publicationDate = formatDate(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].publicationDate);
                }
                if(formatDate(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].mediationSubmissionDate) !='/undefined/NaN') {
                    if(formatDate(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].mediationSubmissionDate) !='01/Jan/1970')
                    this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].mediationSubmissionDate = formatDate(this.fileFollowUp.fileFollowUpLegalExpenseEntityList[i].mediationSubmissionDate);
                }
            }

            for(i = 0; i< this.fileFollowUp.auctionStayedEntityList.length; i++){
                if(formatDate(this.fileFollowUp.auctionStayedEntityList[i].auctionStayedDate) !='/undefined/NaN') {
                    if(formatDate(this.fileFollowUp.auctionStayedEntityList[i].auctionStayedDate) !='01/Jan/1970')
                    this.fileFollowUp.auctionStayedEntityList[i].auctionStayedDate = formatDate(this.fileFollowUp.auctionStayedEntityList[i].auctionStayedDate);
                }
            }

            for(i = 0; i< this.fileFollowUp.fileFollowUpAccountResheduledList.length; i++){
                if(formatDate(this.fileFollowUp.fileFollowUpAccountResheduledList[i].dateOfAccountRescheduled) !='/undefined/NaN') {
                    if(formatDate(this.fileFollowUp.fileFollowUpAccountResheduledList[i].dateOfAccountRescheduled) !='01/Jan/1970')
                    this.fileFollowUp.fileFollowUpAccountResheduledList[i].dateOfAccountRescheduled = formatDate(this.fileFollowUp.fileFollowUpAccountResheduledList[i].dateOfAccountRescheduled);
                }
            }

            for(i = 0; i< this.fileFollowUp.fileFollowUpLegalNoticeServedForArtharinSuits.length; i++){
                if(formatDate(this.fileFollowUp.fileFollowUpLegalNoticeServedForArtharinSuits[i].dateOfLegalNoticeServedForArtharinSuit) !='/undefined/NaN') {
                    if(formatDate(this.fileFollowUp.fileFollowUpLegalNoticeServedForArtharinSuits[i].dateOfLegalNoticeServedForArtharinSuit) !='01/Jan/1970')
                    this.fileFollowUp.fileFollowUpLegalNoticeServedForArtharinSuits[i].dateOfLegalNoticeServedForArtharinSuit = formatDate(this.fileFollowUp.fileFollowUpLegalNoticeServedForArtharinSuits[i].dateOfLegalNoticeServedForArtharinSuit);
                }
            }

            for(i = 0; i< this.fileFollowUp.fileFollowUpLegalNoticeServedNIActs.length; i++){
                if(formatDate(this.fileFollowUp.fileFollowUpLegalNoticeServedNIActs[i].dateOfLegalNoticeServedForUS138OfNIAct) !='/undefined/NaN') {
                    if(formatDate(this.fileFollowUp.fileFollowUpLegalNoticeServedNIActs[i].dateOfLegalNoticeServedForUS138OfNIAct) !='01/Jan/1970')
                    this.fileFollowUp.fileFollowUpLegalNoticeServedNIActs[i].dateOfLegalNoticeServedForUS138OfNIAct = formatDate(this.fileFollowUp.fileFollowUpLegalNoticeServedNIActs[i].dateOfLegalNoticeServedForUS138OfNIAct);
                }
            }

            this.fileFollowUp.totalLegalExpenseAmount = this.totalLegalExpenseAmount;

            var entity = JSON.stringify(this.fileFollowUp);
            var host = window.location.host;
            this.isLoading = true;
            this.$http.post('https://' + host + '/legal/data-entry/litigation-file-follow-up/rest/create', entity,
                {
                    credentials: true,
                    headers: {
                        'X-CSRF-TOKEN': window.csrfToken,
                    }
                }).then(res => {
                if (res.ok && res.body.success) {
                swal("Successfully saved");
                this.goToList();
                this.isLoading = false;
            } else {
                swal("Failed to save changes");
                this.isLoading = false;
            }
        }).catch(err => {
                swal("Please fill all the fields correctly");
            this.errors = err.body;
            this.isLoading = false;
        })
        },

        addNewCollateralSecurity: function(){
            this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList.push({/*errors: "Please insert non empty Collateral Security"*/});
        },
        removeExistingCollateralSecurity: function(index){
            this.fileFollowUp.fileFollowUpCollateralSecurityDetailsList.splice(index,1)
        },

        disbaleCollSec(security){
            security.enabled = 0;
            security.deleted = 1;
        },

        addAuctionNoticePublished: function(){

            this.fileFollowUp.auctionNoticePublishedEntityList.push({});


        },
        removeAuctionNoticePublish: function(index){
            this.fileFollowUp.auctionNoticePublishedEntityList.splice(index,1);
        },
        disbaleAuctionNoticePublish(auctionNotice){
            auctionNotice.enabled = 0;
            auctionNotice.deleted = 1;
        },
        addAccountRepublished: function(){
            this.fileFollowUp.fileFollowUpAccountResheduledList.push({});
        },
        removeAccountRepublished: function(index){
            this.fileFollowUp.fileFollowUpAccountResheduledList.splice(index,1);
        },
        disbaleAccountRepublished(account){
            account.enabled = 0;
            account.deleted = 1;
        },
        addLegalNoticeServedForArtharin: function(){
            this.fileFollowUp.fileFollowUpLegalNoticeServedForArtharinSuits.push({});
        },
        removeLegalNoticeServedForArtharin: function(index){
            this.fileFollowUp.fileFollowUpLegalNoticeServedForArtharinSuits.splice(index,1);
        },
        disbaleLegalNoticeServedForArtharin(artharin){
            artharin.enabled = 0;
            artharin.deleted = 1;
        },
        addLegalNoticeServedForNiAct: function(){
            this.fileFollowUp.fileFollowUpLegalNoticeServedNIActs.push({});
        },
        removeLegalNoticeServedForNiAct: function(index){
            this.fileFollowUp.fileFollowUpLegalNoticeServedNIActs.splice(index,1);
        },
        disbaleLegalNoticeServedForNiAct(niAct){
            niAct.enabled = 0;
            niAct.deleted = 1;
        },
        }
        });

        let datepicker = $.fn.datepicker;
        let defaults = datepicker.defaults;
        defaults.autoclose = true;
        defaults.format = 'dd-mm-yyyy';
        defaults.forceParse = false;

        function setPropertyValueFromInput(source) {
            fileFollowUpApp.fileFollowUp[source.name] = source.value;
        }

        function isValue(value) {
            let checkString = (typeof value === 'string') ? value.trim().toLowerCase() : value;
            return checkString && checkString !== '-' && checkString !== '_' && checkString !== 'null';
        }

    </script>

    <style>
        #auctionNamePublishDate{
            height: 30px;
            border: 1px solid lightgrey;
            width: 145%;
        }
        #auctionStayedDate{
            height: 30px;
            border: 1px solid lightgrey;
            width: 100%;
        }
        #legalExpenseDate{
            height: 30px;
            border: 1px solid lightgrey;
            width: 145%;
        }
        #paperPublicationAuctionDate{
            height: 30px;
            border: 1px solid lightgrey;
            width: 145%;
        }
        #publicationDate{
            height: 30px;
            border: 1px solid lightgrey;
            width: 145%;
        }
        #mediationSubmissionDate{
            height: 30px;
            border: 1px solid lightgrey;
            width: 145%;
        }

        #dateOfAccountRescheduled{
            height: 30px;
            border: 1px solid lightgrey;
            width: 100%;
        }
        #dateOfLegalNoticeServedForArtharinSuit{
            height: 30px;
            border: 1px solid lightgrey;
            width: 100%;
        }
        #dateOfLegalNoticeServedForUS138OfNIAct{
            height: 30px;
            border: 1px solid lightgrey;
            width: 100%;
        }
    </style>

</div>
</body>
</html>