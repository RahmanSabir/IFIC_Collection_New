<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Case Lists History</title>
    <style>
        #fileFollowUpHistoryModal {
            position: absolute;
            width: 100%;
        }

    </style>
</head>
<body>
<div id="layout-cibReport" th:fragment="content" th:remove="tag">
    <!-- Modal -->
    <div class="modal fade" id="fileFollowUpHistoryModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content" style="width:128%;overflow-x: scroll;">
                <div class="modal-header">
                    <h3 class="modal-title" id="fileFollowUpHistoryModalLabel">File Follow Up History</h3>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span class="btn btn-sm btn-danger" aria-hidden="true">&times;</span>
                    </button>

                </div>

                <div class="modal-body" id="fileFollowUpHistoryBody">
                    <table id="historyTableApp" class="table table-striped table-bordered table-condensed">
                        <thead>
                        <tr>
                            <th>SL#</th>
                            <th>LD No.</th>
                            <th>File Transferred to SAMD (Legal wing)</th>
                            <th>Branch Name</th>
                            <th>Account’s Name</th>
                            <th>Borrower’s Name</th>
                            <th>Customer’s CIF Number</th>
                            <th>Customer’s A/c Number</th>
                            <th>Business segment</th>
                            <th>Legal notice date for Artharin suit (y/n)</th>
                            <th>Legal notice date for u/s 138 of N.I Act (y/n)</th>
                            <th>Auction notice published (y/n)</th>
                            <th>Auction held on Date</th>
                            <th>Auction held on Newspaper name</th>
                            <th>Bidders participation details</th>
                            <th>Auction accepted by the Management  (y/n)</th>
                            <th>Property sold through auction  (y/n)</th>
                            <th>Account adjusted before filing Artharin suit (y/n)</th>
                            <th>Amount after partial adjustment through auction</th>
                            <th>Account rescheduled</th>
                            <th>Remarks</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr v-for="(item, key) in fileFollowUpList">
                            <td>{{(++key)}}</td>
                            <td>{{item.ldNo}}</td>
                            <td>{{item.fileTransferToSAMD}}</td>
                            <td>{{item.branchName}}</td>
                            <td>{{item.accountName}}</td>
                            <td>{{item.borrowerName}}</td>
                            <td>{{item.customerCifNumber}}</td>
                            <td>{{item.customerAccountNumber}}</td>
                            <td>{{item.businessSegment}}</td>
                            <td v-if="!item.legalNoticeServedForArtharinSuit">No</td>
                            <td v-if="item.legalNoticeServedForArtharinSuit">{{item.dateOfLegalNoticeServedForArtharinSuit}}</td>
                            <td v-if="!item.legalNoticeServedForUS138OfNIAct">No</td>
                            <td v-if="item.legalNoticeServedForUS138OfNIAct">{{item.dateOfLegalNoticeServedForUS138OfNIAct}}</td>
                            <td v-if="!item.auctionNoticePublished">No</td>
                            <td v-if="item.auctionNoticePublished">{{item.dateOfAuctionNoticePublished}}</td>
                            <td>{{item.dateOfAuctionHeldOn}}</td>
                            <td>{{item.newspaperNameForActionHeldOn}}</td>
                            <td v-if="item.biddersParticipated">
                                <table class="table">
                                    <tr>
                                        <td>Number of participants:</td>
                                        <td>{{item.numberOfParticipants}}</td>
                                    </tr>
                                    <tr>
                                        <td>Highest Bid Amount:</td>
                                        <td>{{item.highestBidAmount}}</td>
                                    </tr>
                                    <tr>
                                        <td>Loan Outstanding:</td>
                                        <td>{{item.loanOutstanding}}</td>
                                    </tr>
                                    <tr>
                                        <td>Force Sale Value:</td>
                                        <td>{{item.forceSaleValue}}</td>
                                    </tr>
                                    <tr>
                                        <td>Market Value:</td>
                                        <td>{{item.marketValue}}</td>
                                    </tr>
                                    <tr>
                                        <td>Number of Land:</td>
                                        <td>{{item.numberOfScheduledLand}}</td>
                                    </tr>
                                    <tr>
                                        <td>Total Land:</td>
                                        <td>{{item.totalLandArea}}</td>
                                    </tr>
                                    <tr>
                                        <td>Bidder’s participation:</td>
                                        <td>{{item.biddersParticipation}}</td>
                                    </tr>
                                </table>
                            </td>
                            <td v-if="!item.biddersParticipated">No</td>
                            <td v-if="!item.auctionAcceptedByManagement">No</td>
                            <td v-if="item.auctionAcceptedByManagement">{{item.dateOfAuctionAcceptedByManagement}}</td>
                            <td v-if="!item.propertySoldThroughAuction">No</td>
                            <td v-if="item.propertySoldThroughAuction">{{item.dateOfPropertySoldThroughAuction}}</td>
                            <td v-if="!item.accountAdjustedBeforeFilingArtharinSuit">No</td>
                            <td v-if="item.accountAdjustedBeforeFilingArtharinSuit">{{item.dateOfAccountAdjustedBeforeFilingArtharinSuit}}</td>
                            <td v-if="!item.amountAfterPartialAdjustmentThroughAuction">No</td>
                            <td v-if="item.amountAfterPartialAdjustmentThroughAuction">{{item.dateOfPartialAdjustmentThroughAuction}}</td>
                            <td v-if="!item.accountRescheduled">No</td>
                            <td v-if="item.accountRescheduled">{{item.dateOfAccountRescheduled}}</td>
                            <td>{{item.remarks}}</td>
                        </tr>
                        </tbody>
                        <tfoot></tfoot>
                    </table>

                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        var historyTableApp = new Vue({
            el: "#historyTableApp",
            data: {
                fileFollowUpList: [],
                isLoading: false
            },
            methods: {
                getModifiedDate: function(date){
                    return moment(date).format("DD-MM-YYYY")
                },
                getHistory: function (id) {
                    if (id) {
                        let vm = this;
                        var host = window.location.host;
                        var url = 'https://' + host + '/legal/data-entry/litigation-file-follow-up/rest/revisions?id=' + id;
                        vm.$http.get(url,
                            {
                                credentials: true,
                                headers: {
                                    'X-CSRF-TOKEN': window.csrfToken,
                                }
                            }).then(res => {
                            vm.fileFollowUpList = Array.isArray(res.body) ? res.body : [];
                            // $('#fileFollowUpHistoryBtn').click();
                            $('#fileFollowUpHistoryModal').modal('show');
                        }).catch(err => {
                            console.log(err);
                            swal("Something went wrong");
                        })

                    }
                },
            }
        })
    </script>
</div>
</body>
</html>